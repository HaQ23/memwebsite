"use strict";var selectedElement,image,imageWidth,imageHeight,allTemaplateItems=document.querySelectorAll(".select-temaplate__carousel-item "),selectTemplateSection=document.querySelector(".select-temaplate"),setImageSection=document.querySelector(".set-image"),backToSelectTemplateSeciontBtn=document.querySelector(".set-image__back"),createMemSection=document.querySelector(".create-mem"),loadFileBtn=document.querySelector(".add-file"),createMemBackBtn=createMemSection.querySelector(".back"),currentlyCreatedMem=createMemSection.querySelector(".create-mem__img-box"),allStandardImage=document.querySelectorAll(".standard-theme__item"),downloadMemBtn=document.querySelector(".download-mem"),createMemBox=document.querySelector(".create-mem__mem-box"),canvas=document.querySelector("#canvas-mem"),textAlignBtns=document.querySelectorAll("[data-text-align]"),fontStyleBtns=document.querySelectorAll(".font-style-btn"),changeTemplateBtn=document.querySelector(".create-mem__change-template"),changeTemplateSect=document.querySelector(".change-template"),closeChangeTemplateSectBtn=changeTemplateSect.querySelector(".close-btn"),useYourPhoto=!1,numberOfMem=1,changeShowElement=function(){setImageSection.classList.toggle("show"),selectTemplateSection.classList.toggle("show")},chooseCurrentTemaplte=function(e){selectedElement=e.target.dataset.typeTemplate,document.querySelector(".selected-temaplate img").setAttribute("src","./dist/assets/images/meme-demo-template-".concat(selectedElement,".webp")),changeShowElement()},showCreateMem=function(e){createMemSection.classList.contains("show")||setWidthAndHeightMem(e),document.querySelector("body").classList.toggle("no-scroll"),createMemSection.classList.toggle("show"),useYourPhoto=!1},setWidthAndHeightMem=function(e){var t;useYourPhoto?(t=URL.createObjectURL(loadFileBtn.files[0]),(image=new Image).src=t,currentlyCreatedMem.innerHTML="",image.classList.add("create-mem__img"),currentlyCreatedMem.appendChild(image),image=currentlyCreatedMem.querySelector("img")):(t=e.target.querySelector("img").src,(image=new Image).src=t,currentlyCreatedMem.innerHTML="",image.classList.add("create-mem__img"),currentlyCreatedMem.appendChild(image)),image.onload=function(){imageWidth=image.clientWidth,imageHeight=image.clientHeight,currentlyCreatedMem.classList.add("active"),canvas.style.display="block",genereteMem(imageWidth,imageHeight)}},genereteMem=function(e,t){var l,a=canvas.getContext("2d"),c=document.querySelector("[data-text-align].active-value").dataset.textAlign,o=document.querySelector("#font-size").value,n=document.querySelector("#input-stroke-style").value,i=document.querySelector("#input-color-text").value,r=document.querySelector(".font-style-btn.active-value").dataset.fontStyle,m=document.querySelector("#select-font").value,s=80,u="",d="";switch(60<o||""==o?o=60:o<10&&(o=10),canvas.width=e,canvas.height=t,a.lineWidth=Math.floor(o/4),a.textAlign=c,a.lineJoin="round",a.font="".concat(r," ").concat(o,"px ").concat(m),a.strokeStyle=n,a.drawImage(image,0,0,image.naturalWidth,image.height,0,0,e,t),l="left"==c?5:"center"==c?e/2:e-5,selectedElement){case"1":a.fillStyle="black",a.fillRect(0,0,e,s),a.fillRect(0,t-s,e,s),u=document.querySelector("#top-text").value,d=document.querySelector("#bottom-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3),a.textBaseline="bottom",a.strokeText(d,l,t-3),a.fillText(d,l,t-3);break;case"2":a.fillStyle="black",a.fillRect(0,0,e,s),u=document.querySelector("#top-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3);break;case"3":a.fillStyle="black",a.fillRect(0,t-s,e,s),d=document.querySelector("#bottom-text").value,a.fillStyle=i,a.textBaseline="bottom",a.strokeText(d,l,t-3),a.fillText(d,l,t-3);break;case"4":a.fillStyle="white",a.fillRect(0,0,e,s),a.fillRect(0,t-s,e,s),u=document.querySelector("#top-text").value,d=document.querySelector("#bottom-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3),a.textBaseline="bottom",a.strokeText(d,l,t-3),a.fillText(d,l,t-3);break;case"5":a.fillStyle="white",a.fillRect(0,0,e,s),u=document.querySelector("#top-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3);break;case"6":a.fillStyle="white",a.fillRect(0,t-s,e,s),d=document.querySelector("#bottom-text").value,a.fillStyle=i,a.textBaseline="bottom",a.strokeText(d,l,t-3),a.fillText(d,l,t-3);break;case"7":u=document.querySelector("#top-text").value,d=document.querySelector("#bottom-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3),a.textBaseline="bottom",a.strokeText(d,l,t-3),a.fillText(d,l,t-3);break;case"8":u=document.querySelector("#top-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3);break;case"9":d=document.querySelector("#bottom-text").value,a.textBaseline="bottom",a.fillStyle=i,a.strokeText(d,l,t-3),a.fillText(d,l,t-3)}},downloadMem=function(){downloadMemBtn.download="meme".concat(numberOfMem,".png"),downloadMemBtn.href=canvas.toDataURL(),numberOfMem++},toggleShowChangeTemaplateSec=function(){changeTemplateSect.classList.contains("show")||changeTemplateSect.querySelectorAll(".change-template__item").forEach(function(e){e.dataset.typeTemplate==selectedElement?e.classList.add("current-template"):e.classList.remove("current-template")}),changeTemplateSect.classList.toggle("show")};allTemaplateItems.forEach(function(e){e.addEventListener("click",chooseCurrentTemaplte)}),backToSelectTemplateSeciontBtn.addEventListener("click",changeShowElement),loadFileBtn.addEventListener("change",function(){useYourPhoto=!0,showCreateMem(this)}),createMemBackBtn.addEventListener("click",function(){showCreateMem(),useYourPhoto=!1,canvas.style.display="none",currentlyCreatedMem.classList.remove("active")}),allStandardImage.forEach(function(e){e.addEventListener("click",showCreateMem)}),downloadMemBtn.addEventListener("click",downloadMem),textAlignBtns.forEach(function(e){e.addEventListener("click",function(){textAlignBtns.forEach(function(e){e.classList.remove("active-value")}),e.classList.add("active-value"),genereteMem(imageWidth,imageHeight)})}),document.querySelectorAll(".create-mem__input").forEach(function(e){e.addEventListener("input",function(){genereteMem(imageWidth,imageHeight)})}),fontStyleBtns.forEach(function(e){e.addEventListener("click",function(){fontStyleBtns.forEach(function(e){e.classList.remove("active-value")}),e.classList.add("active-value"),genereteMem(imageWidth,imageHeight)})}),[closeChangeTemplateSectBtn,changeTemplateBtn].forEach(function(e){e.addEventListener("click",toggleShowChangeTemaplateSec)}),changeTemplateSect.querySelectorAll(".change-template__item").forEach(function(e){e.addEventListener("click",function(){selectedElement=e.dataset.typeTemplate,changeTemplateSect.classList.toggle("show"),genereteMem(imageWidth,imageHeight)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyYXRlTWVtLmpzIl0sIm5hbWVzIjpbInNlbGVjdFRlbXBsYXRlU2VjdGlvbiIsImNob29zZUN1cnJlbnRUZW1hcGx0ZSIsInNlbGVjdGVkRWxlbWVudCIsImFsbFRlbWFwbGF0ZUl0ZW1zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicXVlcnlTZWxlY3RvciIsInNldEltYWdlU2VjdGlvbiIsImJhY2tUb1NlbGVjdFRlbXBsYXRlU2VjaW9udEJ0biIsImNyZWF0ZU1lbVNlY3Rpb24iLCJjcmVhdGVNZW1CYWNrQnRuIiwiY3VycmVudGx5Q3JlYXRlZE1lbSIsImFsbFN0YW5kYXJkSW1hZ2UiLCJkb3dubG9hZE1lbUJ0biIsInRleHRBbGlnbkJ0bnMiLCJmb250U3R5bGVCdG5zIiwiY2hhbmdlVGVtcGxhdGVCdG4iLCJjaGFuZ2VUZW1wbGF0ZVNlY3QiLCJjbG9zZUNoYW5nZVRlbXBsYXRlU2VjdEJ0biIsInVzZVlvdXJQaG90byIsIm51bWJlck9mTWVtIiwiY2hhbmdlU2hvd0VsZW1lbnQiLCJjbGFzc0xpc3QiLCJzZWxlY3RlZFRlbXBsYXRlSW1nIiwidG9nZ2xlIiwic2hvd0NyZWF0ZU1lbSIsImVsIiwiZGF0YXNldCIsInNldEF0dHJpYnV0ZSIsImNvbmNhdCIsImltYWdlIiwiaW1hZ2VEYXRhVXJsIiwiY29udGFpbnMiLCJzZXRXaWR0aEFuZEhlaWdodE1lbSIsImlubmVySFRNTCIsIlVSTCIsImFwcGVuZENoaWxkIiwibG9hZEZpbGVCdG4iLCJmaWxlcyIsIkltYWdlIiwib25sb2FkIiwiaW1hZ2VIZWlnaHQiLCJhZGQiLCJ0YXJnZXQiLCJzcmMiLCJnZW5lcmV0ZU1lbSIsImdldENvbnRleHQiLCJ5T2Zmc2V0Iiwic3Ryb2tlU3R5bGUiLCJpbWFnZVdpZHRoIiwiY2FudmFzIiwiZnJhbWVUaGlja25lc3MiLCJmb250U2l6ZSIsIndpZHRoIiwieE9mVGV4dCIsInRleHRBbGlnbiIsInZhbHVlIiwibGluZVdpZHRoIiwiTWF0aCIsInRleHRhbGlnbiIsImxpbmVKb2luIiwiY3R4IiwiZm9udFN0eWxlIiwiZHJhd0ltYWdlIiwidGV4dFRvcCIsInRleHRCb3R0b20iLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZsb29yIiwiZm9udCIsImZvbnRGYW1pbGx5IiwidGV4dEJhc2VsaW5lIiwiaGVpZ2h0Iiwic3Ryb2tlVGV4dCIsImZpbGxUZXh0IiwiZG93bmxvYWRNZW0iLCJ0b2dnbGVTaG93Q2hhbmdlVGVtYXBsYXRlU2VjIiwiYWxsVGVtcGFsdGVzIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRvd25sb2FkIiwiZGlzcGxheSIsInRvRGF0YVVSTCIsImZvckVhY2giLCJ0eXBlVGVtcGxhdGUiXSwibWFwcGluZ3MiOiJhQUFBLElBa0NDQSxnQkFHS0MsTUFDTEMsV0FBQUEsWUF0Q0tDLGtCQUFvQkMsU0FBU0MsaUJBQ2xDLG1DQUFtQyxFQUU5Qkwsc0JBQXdCSSxTQUFTRSxjQUFjLG1CQUFvQixFQUNuRUMsZ0JBQWtCSCxTQUFTRSxjQUFjLFlBQWEsRUFDdERFLCtCQUdOSixTQUFNSyxjQUFtQkwsa0JBQVNFLEVBRTVCSSxpQkFBbUJELFNBQUFBLGNBQWlCSCxhQUFxQixFQUN6REssWUFBQUEsU0FBc0JGLGNBQWlCSCxXQUFBQSxFQUd2Q00saUJBQW1CUixpQkFBU0MsY0FBaUIsT0FBQSxFQUM3Q1Esb0JBQWlCVCxpQkFBdUJFLGNBQzlDLHNCQUFxQkYsRUFFZlUsaUJBQWdCVixTQUFTQyxpQkFBaUIsdUJBQW9CLEVBQzlEVSxlQUFnQlgsU0FBU0MsY0FBaUIsZUFBQSxFQUMxQ1csYUFBaUJaLFNBQUdBLGNBQVNFLHNCQUNsQyxFQUVLVyxPQUFBQSxTQUFrQlgsY0FBWUEsYUFBYyxFQUM1Q1ksY0FBQUEsU0FBMEJiLGlCQUMvQlksbUJBQWlDLEVBQzlCZixjQUFlRSxTQUFBQyxpQkFBQSxpQkFBQSxFQUNmYyxrQkFBb0JmLFNBQUFFLGNBQ3hCLDhCQUFTLEVBRUxjLG1CQUFlaEIsU0FBQUUsY0FBQSxrQkFBQSxFQUViZSwy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QyxTQUFTQyxpQkFBaUIsb0JBQW9CLEVBQUU4RSxRQUFRLFNBQUN6RCxHQUN4REEsRUFBR3FELGlCQUFpQixRQUFTLFdBQzVCbEMsWUFBWUksV0FBWVIsV0FBVyxDQUNwQyxDQUFDLENBQ0YsQ0FBQyxFQUNEMUIsY0FBY29FLFFBQVEsU0FBQ3pELEdBQ3RCQSxFQUFHcUQsaUJBQWlCLFFBQVMsV0FDNUJoRSxjQUFjb0UsUUFBUSxTQUFDekQsR0FDdEJBLEVBQUdKLFVBQVV3RCxPQUFPLGNBQWMsQ0FDbkMsQ0FBQyxFQUNEcEQsRUFBR0osVUFBVW9CLElBQUksY0FBYyxFQUMvQkcsWUFBWUksV0FBWVIsV0FBVyxDQUNwQyxDQUFDLENBQ0YsQ0FBQyxFQUNELENBQUN2QiwyQkFBNEJGLG1CQUFtQm1FLFFBQVEsU0FBQ3pELEdBQ3hEQSxFQUFHcUQsaUJBQWlCLFFBQVNILDRCQUE0QixDQUMxRCxDQUFDLEVBQ0QzRCxtQkFBbUJaLGlCQUFpQix3QkFBd0IsRUFBRThFLFFBQVEsU0FBQ3pELEdBQ3RFQSxFQUFHcUQsaUJBQWlCLFFBQVMsV0FDNUI3RSxnQkFBa0J3QixFQUFHQyxRQUFReUQsYUFDN0JuRSxtQkFBbUJLLFVBQVVFLE9BQU8sTUFBTSxFQUMxQ3FCLFlBQVlJLFdBQVlSLFdBQVcsQ0FDcEMsQ0FBQyxDQUNGLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVNZW0ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYWxsVGVtYXBsYXRlSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG5cdFwiLnNlbGVjdC10ZW1hcGxhdGVfX2Nhcm91c2VsLWl0ZW0gXCJcclxuKTtcclxuY29uc3Qgc2VsZWN0VGVtcGxhdGVTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWxlY3QtdGVtYXBsYXRlXCIpO1xyXG5jb25zdCBzZXRJbWFnZVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldC1pbWFnZVwiKTtcclxuY29uc3QgYmFja1RvU2VsZWN0VGVtcGxhdGVTZWNpb250QnRuID1cclxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldC1pbWFnZV9fYmFja1wiKTtcclxuXHJcbmNvbnN0IGNyZWF0ZU1lbVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyZWF0ZS1tZW1cIik7XHJcbmNvbnN0IGxvYWRGaWxlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtZmlsZVwiKTtcclxuY29uc3QgY3JlYXRlTWVtQmFja0J0biA9IGNyZWF0ZU1lbVNlY3Rpb24ucXVlcnlTZWxlY3RvcihcIi5iYWNrXCIpO1xyXG5jb25zdCBjdXJyZW50bHlDcmVhdGVkTWVtID0gY3JlYXRlTWVtU2VjdGlvbi5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLmNyZWF0ZS1tZW1fX2ltZy1ib3hcIlxyXG4pO1xyXG5jb25zdCBhbGxTdGFuZGFyZEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zdGFuZGFyZC10aGVtZV9faXRlbVwiKTtcclxuY29uc3QgZG93bmxvYWRNZW1CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRvd25sb2FkLW1lbVwiKTtcclxuY29uc3QgY3JlYXRlTWVtQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcmVhdGUtbWVtX19tZW0tYm94XCIpO1xyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbnZhcy1tZW1cIik7XHJcbmNvbnN0IHRleHRBbGlnbkJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdGV4dC1hbGlnbl1cIilcclxuY29uc3QgZm9udFN0eWxlQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9udC1zdHlsZS1idG5cIik7XHJcbmNvbnN0IGNoYW5nZVRlbXBsYXRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi5jcmVhdGUtbWVtX19jaGFuZ2UtdGVtcGxhdGVcIlxyXG4pO1xyXG5jb25zdCBjaGFuZ2VUZW1wbGF0ZVNlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoYW5nZS10ZW1wbGF0ZVwiKTtcclxuY29uc3QgY2xvc2VDaGFuZ2VUZW1wbGF0ZVNlY3RCdG4gPVxyXG5cdGNoYW5nZVRlbXBsYXRlU2VjdC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlLWJ0blwiKTtcclxubGV0IHNlbGVjdGVkRWxlbWVudDtcclxubGV0IHVzZVlvdXJQaG90byA9IGZhbHNlO1xyXG5sZXQgaW1hZ2U7XHJcbmxldCBpbWFnZVdpZHRoLCBpbWFnZUhlaWdodDtcclxubGV0IG51bWJlck9mTWVtID0gMTtcclxuXHJcbmNvbnN0IGNoYW5nZVNob3dFbGVtZW50ID0gKCkgPT4ge1xyXG5cdHNldEltYWdlU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcclxuXHRzZWxlY3RUZW1wbGF0ZVNlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcbn07XHJcblxyXG5jb25zdCBjaG9vc2VDdXJyZW50VGVtYXBsdGUgPSAoZWwpID0+IHtcclxuXHRzZWxlY3RlZEVsZW1lbnQgPSBlbC50YXJnZXQuZGF0YXNldC50eXBlVGVtcGxhdGU7XHJcblx0Y29uc3Qgc2VsZWN0ZWRUZW1wbGF0ZUltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VsZWN0ZWQtdGVtYXBsYXRlIGltZ1wiKTtcclxuXHRzZWxlY3RlZFRlbXBsYXRlSW1nLnNldEF0dHJpYnV0ZShcclxuXHRcdFwic3JjXCIsXHJcblx0XHRgLi9kaXN0L2Fzc2V0cy9pbWFnZXMvbWVtZS1kZW1vLXRlbXBsYXRlLSR7c2VsZWN0ZWRFbGVtZW50fS53ZWJwYFxyXG5cdCk7XHJcblx0Y2hhbmdlU2hvd0VsZW1lbnQoKTtcclxufTtcclxuXHJcbmNvbnN0IHNob3dDcmVhdGVNZW0gPSAoZWwpID0+IHtcclxuXHRpZiAoIWNyZWF0ZU1lbVNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvd1wiKSkge1xyXG5cdFx0c2V0V2lkdGhBbmRIZWlnaHRNZW0oZWwpO1xyXG5cdH1cclxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5jbGFzc0xpc3QudG9nZ2xlKFwibm8tc2Nyb2xsXCIpO1xyXG5cdGNyZWF0ZU1lbVNlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcblx0dXNlWW91clBob3RvID0gZmFsc2U7XHJcbn07XHJcbi8vdGhpcyBmdW5jdGlvbiBzZXRzICAgaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQgIHdoaWNoIHdpbGwgYmUgbmVlZGVkIGZvciB0aGUgY29ycmVjdCBkaXNwbGF5IG9mIG1lbWVzXHJcbmNvbnN0IHNldFdpZHRoQW5kSGVpZ2h0TWVtID0gKGVsKSA9PiB7XHJcblx0aWYgKHVzZVlvdXJQaG90bykge1xyXG5cdFx0Y29uc3QgaW1hZ2VEYXRhVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChsb2FkRmlsZUJ0bi5maWxlc1swXSk7XHJcblx0XHRpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5cdFx0aW1hZ2Uuc3JjID0gaW1hZ2VEYXRhVXJsO1xyXG5cdFx0Y3VycmVudGx5Q3JlYXRlZE1lbS5pbm5lckhUTUwgPSBcIlwiO1xyXG5cdFx0aW1hZ2UuY2xhc3NMaXN0LmFkZChcImNyZWF0ZS1tZW1fX2ltZ1wiKTtcclxuXHRcdGN1cnJlbnRseUNyZWF0ZWRNZW0uYXBwZW5kQ2hpbGQoaW1hZ2UpO1xyXG5cdFx0aW1hZ2UgPSBjdXJyZW50bHlDcmVhdGVkTWVtLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIik7XHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnN0IGltYWdlRGF0YVVybCA9IGVsLnRhcmdldC5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpLnNyYztcclxuXHRcdGltYWdlID0gbmV3IEltYWdlKCk7XHJcblx0XHRpbWFnZS5zcmMgPSBpbWFnZURhdGFVcmw7XHJcblx0XHRjdXJyZW50bHlDcmVhdGVkTWVtLmlubmVySFRNTCA9IFwiXCI7XHJcblx0XHRpbWFnZS5jbGFzc0xpc3QuYWRkKFwiY3JlYXRlLW1lbV9faW1nXCIpO1xyXG5cdFx0Y3VycmVudGx5Q3JlYXRlZE1lbS5hcHBlbmRDaGlsZChpbWFnZSk7XHJcblx0fVxyXG5cdGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdGltYWdlV2lkdGggPSBpbWFnZS5jbGllbnRXaWR0aDtcclxuXHRcdGltYWdlSGVpZ2h0ID0gaW1hZ2UuY2xpZW50SGVpZ2h0O1xyXG5cdFx0Y3VycmVudGx5Q3JlYXRlZE1lbS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG5cdFx0Y2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblx0XHRnZW5lcmV0ZU1lbShpbWFnZVdpZHRoLCBpbWFnZUhlaWdodCk7XHJcblx0fTtcclxufTtcclxuY29uc3QgZ2VuZXJldGVNZW0gPSAod2lkdGgsIGhlaWdodCkgPT4ge1xyXG5cdGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblx0Y29uc3QgeU9mZnNldCA9IDM7XHJcblx0Y29uc3QgdGV4dGFsaWduID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLXRleHQtYWxpZ25dLmFjdGl2ZS12YWx1ZVwiKVxyXG5cdFx0LmRhdGFzZXQudGV4dEFsaWduO1xyXG5cclxuXHRsZXQgZm9udFNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZvbnQtc2l6ZVwiKS52YWx1ZTtcclxuXHRjb25zdCBzdHJva2VTdHlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtc3Ryb2tlLXN0eWxlXCIpLnZhbHVlO1xyXG5cdGNvbnN0IGZpbGxTdHlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtY29sb3ItdGV4dFwiKS52YWx1ZTtcclxuXHRjb25zdCBmb250U3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvbnQtc3R5bGUtYnRuLmFjdGl2ZS12YWx1ZVwiKVxyXG5cdFx0LmRhdGFzZXQuZm9udFN0eWxlO1xyXG5cdGNvbnN0IGZvbnRGYW1pbGx5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzZWxlY3QtZm9udFwiKS52YWx1ZTtcclxuXHRjb25zdCBmcmFtZVRoaWNrbmVzcyA9IDgwO1xyXG5cdGxldCB4T2ZUZXh0LFxyXG5cdFx0dGV4dFRvcCA9IFwiXCIsXHJcblx0XHR0ZXh0Qm90dG9tID0gXCJcIjtcclxuXHRpZiAoZm9udFNpemUgPiA2MCB8fCBmb250U2l6ZSA9PSBcIlwiKSB7XHJcblx0XHRmb250U2l6ZSA9IDYwO1xyXG5cdH0gZWxzZSBpZiAoZm9udFNpemUgPCAxMCkge1xyXG5cdFx0Zm9udFNpemUgPSAxMDtcclxuXHR9XHJcblx0Y2FudmFzLndpZHRoID0gd2lkdGg7XHJcblx0Y2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuXHRjdHgubGluZVdpZHRoID0gTWF0aC5mbG9vcihmb250U2l6ZSAvIDQpO1xyXG5cdGN0eC50ZXh0QWxpZ24gPSB0ZXh0YWxpZ247XHJcblx0Y3R4LmxpbmVKb2luID0gXCJyb3VuZFwiO1xyXG5cdGN0eC5mb250ID0gYCR7Zm9udFN0eWxlfSAke2ZvbnRTaXplfXB4ICR7Zm9udEZhbWlsbHl9YDtcclxuXHRjdHguc3Ryb2tlU3R5bGUgPSBzdHJva2VTdHlsZTtcclxuXHRjdHguZHJhd0ltYWdlKFxyXG5cdFx0aW1hZ2UsXHJcblx0XHQwLFxyXG5cdFx0MCxcclxuXHRcdGltYWdlLm5hdHVyYWxXaWR0aCxcclxuXHRcdGltYWdlLmhlaWdodCxcclxuXHRcdDAsXHJcblx0XHQwLFxyXG5cdFx0d2lkdGgsXHJcblx0XHRoZWlnaHRcclxuXHQpO1xyXG5cdGlmICh0ZXh0YWxpZ24gPT0gXCJsZWZ0XCIpIHtcclxuXHRcdHhPZlRleHQgPSA1O1xyXG5cdH0gZWxzZSBpZiAodGV4dGFsaWduID09IFwiY2VudGVyXCIpIHtcclxuXHRcdHhPZlRleHQgPSB3aWR0aCAvIDI7XHJcblx0fSBlbHNlIHtcclxuXHRcdHhPZlRleHQgPSB3aWR0aCAtIDU7XHJcblx0fVxyXG5cdHN3aXRjaCAoc2VsZWN0ZWRFbGVtZW50KSB7XHJcblx0XHRjYXNlIFwiMVwiOlxyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xyXG5cdFx0XHRjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGZyYW1lVGhpY2tuZXNzKTtcclxuXHRcdFx0Y3R4LmZpbGxSZWN0KDAsIGhlaWdodCAtIGZyYW1lVGhpY2tuZXNzLCB3aWR0aCwgZnJhbWVUaGlja25lc3MpO1xyXG5cdFx0XHR0ZXh0VG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b3AtdGV4dFwiKS52YWx1ZTtcclxuXHRcdFx0dGV4dEJvdHRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYm90dG9tLXRleHRcIikudmFsdWU7XHJcblx0XHRcdGN0eC50ZXh0QmFzZWxpbmUgPSBcInRvcFwiO1xyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xyXG5cdFx0XHRjdHguc3Ryb2tlVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LmZpbGxUZXh0KHRleHRUb3AsIHhPZlRleHQsIHlPZmZzZXQpO1xyXG5cdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJib3R0b21cIjtcclxuXHRcdFx0Y3R4LnN0cm9rZVRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcblx0XHRcdGN0eC5maWxsVGV4dCh0ZXh0Qm90dG9tLCB4T2ZUZXh0LCBoZWlnaHQgLSB5T2Zmc2V0KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwiMlwiOlxyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xyXG5cdFx0XHRjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGZyYW1lVGhpY2tuZXNzKTtcclxuXHRcdFx0dGV4dFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9wLXRleHRcIikudmFsdWU7XHJcblx0XHRcdGN0eC50ZXh0QmFzZWxpbmUgPSBcInRvcFwiO1xyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xyXG5cdFx0XHRjdHguc3Ryb2tlVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LmZpbGxUZXh0KHRleHRUb3AsIHhPZlRleHQsIHlPZmZzZXQpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgXCIzXCI6XHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcblx0XHRcdGN0eC5maWxsUmVjdCgwLCBoZWlnaHQgLSBmcmFtZVRoaWNrbmVzcywgd2lkdGgsIGZyYW1lVGhpY2tuZXNzKTtcclxuXHRcdFx0dGV4dEJvdHRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYm90dG9tLXRleHRcIikudmFsdWU7XHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XHJcblx0XHRcdGN0eC50ZXh0QmFzZWxpbmUgPSBcImJvdHRvbVwiO1xyXG5cdFx0XHRjdHguc3Ryb2tlVGV4dCh0ZXh0Qm90dG9tLCB4T2ZUZXh0LCBoZWlnaHQgLSB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LmZpbGxUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgXCI0XCI6XHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcblx0XHRcdGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgZnJhbWVUaGlja25lc3MpO1xyXG5cdFx0XHRjdHguZmlsbFJlY3QoMCwgaGVpZ2h0IC0gZnJhbWVUaGlja25lc3MsIHdpZHRoLCBmcmFtZVRoaWNrbmVzcyk7XHJcblx0XHRcdHRleHRUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvcC10ZXh0XCIpLnZhbHVlO1xyXG5cdFx0XHR0ZXh0Qm90dG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib3R0b20tdGV4dFwiKS52YWx1ZTtcclxuXHRcdFx0Y3R4LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XHJcblx0XHRcdGN0eC5zdHJva2VUZXh0KHRleHRUb3AsIHhPZlRleHQsIHlPZmZzZXQpO1xyXG5cdFx0XHRjdHguZmlsbFRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcblx0XHRcdGN0eC50ZXh0QmFzZWxpbmUgPSBcImJvdHRvbVwiO1xyXG5cdFx0XHRjdHguc3Ryb2tlVGV4dCh0ZXh0Qm90dG9tLCB4T2ZUZXh0LCBoZWlnaHQgLSB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LmZpbGxUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgXCI1XCI6XHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcblx0XHRcdGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgZnJhbWVUaGlja25lc3MpO1xyXG5cdFx0XHR0ZXh0VG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b3AtdGV4dFwiKS52YWx1ZTtcclxuXHRcdFx0Y3R4LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XHJcblx0XHRcdGN0eC5zdHJva2VUZXh0KHRleHRUb3AsIHhPZlRleHQsIHlPZmZzZXQpO1xyXG5cdFx0XHRjdHguZmlsbFRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSBcIjZcIjpcclxuXHRcdFx0Y3R4LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcclxuXHRcdFx0Y3R4LmZpbGxSZWN0KDAsIGhlaWdodCAtIGZyYW1lVGhpY2tuZXNzLCB3aWR0aCwgZnJhbWVUaGlja25lc3MpO1xyXG5cdFx0XHR0ZXh0Qm90dG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib3R0b20tdGV4dFwiKS52YWx1ZTtcclxuXHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcclxuXHRcdFx0Y3R4LnRleHRCYXNlbGluZSA9IFwiYm90dG9tXCI7XHJcblx0XHRcdGN0eC5zdHJva2VUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG5cdFx0XHRjdHguZmlsbFRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSBcIjdcIjpcclxuXHRcdFx0dGV4dFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9wLXRleHRcIikudmFsdWU7XHJcblx0XHRcdHRleHRCb3R0b20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JvdHRvbS10ZXh0XCIpLnZhbHVlO1xyXG5cdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJ0b3BcIjtcclxuXHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcclxuXHRcdFx0Y3R4LnN0cm9rZVRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcblx0XHRcdGN0eC5maWxsVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LnRleHRCYXNlbGluZSA9IFwiYm90dG9tXCI7XHJcblx0XHRcdGN0eC5zdHJva2VUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG5cdFx0XHRjdHguZmlsbFRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSBcIjhcIjpcclxuXHRcdFx0dGV4dFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9wLXRleHRcIikudmFsdWU7XHJcblx0XHRcdGN0eC50ZXh0QmFzZWxpbmUgPSBcInRvcFwiO1xyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xyXG5cdFx0XHRjdHguc3Ryb2tlVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LmZpbGxUZXh0KHRleHRUb3AsIHhPZlRleHQsIHlPZmZzZXQpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgXCI5XCI6XHJcblx0XHRcdHRleHRCb3R0b20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JvdHRvbS10ZXh0XCIpLnZhbHVlO1xyXG5cdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJib3R0b21cIjtcclxuXHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcclxuXHRcdFx0Y3R4LnN0cm9rZVRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcblx0XHRcdGN0eC5maWxsVGV4dCh0ZXh0Qm90dG9tLCB4T2ZUZXh0LCBoZWlnaHQgLSB5T2Zmc2V0KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgZG93bmxvYWRNZW0gPSAoKSA9PiB7XHJcblx0ZG93bmxvYWRNZW1CdG4uZG93bmxvYWQgPSBgbWVtZSR7bnVtYmVyT2ZNZW19LnBuZ2A7XHJcblx0ZG93bmxvYWRNZW1CdG4uaHJlZiA9IGNhbnZhcy50b0RhdGFVUkwoKTtcclxuXHRudW1iZXJPZk1lbSsrO1xyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlU2hvd0NoYW5nZVRlbWFwbGF0ZVNlYyA9ICgpID0+IHtcclxuXHRpZiAoIWNoYW5nZVRlbXBsYXRlU2VjdC5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93XCIpKSB7XHJcblx0XHRjb25zdCBhbGxUZW1wYWx0ZXMgPSBjaGFuZ2VUZW1wbGF0ZVNlY3QucXVlcnlTZWxlY3RvckFsbChcclxuXHRcdFx0XCIuY2hhbmdlLXRlbXBsYXRlX19pdGVtXCJcclxuXHRcdCk7XHJcblx0XHRhbGxUZW1wYWx0ZXMuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRcdFx0aWYgKGVsLmRhdGFzZXQudHlwZVRlbXBsYXRlID09IHNlbGVjdGVkRWxlbWVudCkge1xyXG5cdFx0XHRcdGVsLmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50LXRlbXBsYXRlXCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJjdXJyZW50LXRlbXBsYXRlXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblx0Y2hhbmdlVGVtcGxhdGVTZWN0LmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpO1xyXG59O1xyXG5hbGxUZW1hcGxhdGVJdGVtcy5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaG9vc2VDdXJyZW50VGVtYXBsdGUpO1xyXG59KTtcclxuYmFja1RvU2VsZWN0VGVtcGxhdGVTZWNpb250QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VTaG93RWxlbWVudCk7XHJcblxyXG5sb2FkRmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcclxuXHR1c2VZb3VyUGhvdG8gPSB0cnVlO1xyXG5cdHNob3dDcmVhdGVNZW0odGhpcyk7XHJcbn0pO1xyXG5jcmVhdGVNZW1CYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0c2hvd0NyZWF0ZU1lbSgpO1xyXG5cdHVzZVlvdXJQaG90byA9IGZhbHNlO1xyXG5cdGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0Y3VycmVudGx5Q3JlYXRlZE1lbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG59KTtcclxuYWxsU3RhbmRhcmRJbWFnZS5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93Q3JlYXRlTWVtKTtcclxufSk7XHJcblxyXG5kb3dubG9hZE1lbUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZG93bmxvYWRNZW0pO1xyXG50ZXh0QWxpZ25CdG5zLmZvckVhY2goKGVsKSA9PiB7XHJcblx0ZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdHRleHRBbGlnbkJ0bnMuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS12YWx1ZVwiKTtcclxuXHRcdH0pO1xyXG5cdFx0ZWwuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS12YWx1ZVwiKTtcclxuXHRcdGdlbmVyZXRlTWVtKGltYWdlV2lkdGgsIGltYWdlSGVpZ2h0KTtcclxuXHR9KTtcclxufSk7XHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY3JlYXRlLW1lbV9faW5wdXRcIikuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRlbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0Z2VuZXJldGVNZW0oaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQpO1xyXG5cdH0pO1xyXG59KTtcclxuZm9udFN0eWxlQnRucy5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRmb250U3R5bGVCdG5zLmZvckVhY2goKGVsKSA9PiB7XHJcblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtdmFsdWVcIik7XHJcblx0XHR9KTtcclxuXHRcdGVsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtdmFsdWVcIik7XHJcblx0XHRnZW5lcmV0ZU1lbShpbWFnZVdpZHRoLCBpbWFnZUhlaWdodCk7XHJcblx0fSk7XHJcbn0pO1xyXG5bY2xvc2VDaGFuZ2VUZW1wbGF0ZVNlY3RCdG4sIGNoYW5nZVRlbXBsYXRlQnRuXS5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVTaG93Q2hhbmdlVGVtYXBsYXRlU2VjKTtcclxufSk7XHJcbmNoYW5nZVRlbXBsYXRlU2VjdC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNoYW5nZS10ZW1wbGF0ZV9faXRlbVwiKS5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRzZWxlY3RlZEVsZW1lbnQgPSBlbC5kYXRhc2V0LnR5cGVUZW1wbGF0ZTtcclxuXHRcdGNoYW5nZVRlbXBsYXRlU2VjdC5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcclxuXHRcdGdlbmVyZXRlTWVtKGltYWdlV2lkdGgsIGltYWdlSGVpZ2h0KTtcclxuXHR9KTtcclxufSk7XHJcbiJdfQ==
