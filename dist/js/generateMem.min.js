"use strict";var selectedElement,image,imageWidth,imageHeight,allTemaplateItems=document.querySelectorAll(".select-temaplate__carousel-item "),selectTemplateSection=document.querySelector(".select-temaplate"),setImageSection=document.querySelector(".set-image"),backToSelectTemplateSeciontBtn=document.querySelector(".set-image__back"),createMemSection=document.querySelector(".create-mem"),loadFileBtn=document.querySelector(".add-file"),createMemBackBtn=createMemSection.querySelector(".back"),currentlyCreatedMem=createMemSection.querySelector(".create-mem__img-box"),allStandardImage=document.querySelectorAll(".standard-theme__item"),downloadMemBtn=document.querySelector(".download-mem"),createMemBox=document.querySelector(".create-mem__mem-box"),canvas=document.querySelector("#canvas-mem"),textAlignBtns=document.querySelectorAll("[data-text-align]"),fontStyleBtns=document.querySelectorAll(".font-style-btn"),changeTemplateBtn=document.querySelector(".create-mem__change-template"),changeTemplateSect=document.querySelector(".change-template"),closeChangeTemplateSectBtn=changeTemplateSect.querySelector(".close-btn"),useYourPhoto=!1,numberOfMem=1,changeShowElement=function(){setImageSection.classList.toggle("show"),selectTemplateSection.classList.toggle("show")},chooseCurrentTemaplte=function(e){selectedElement=e.target.dataset.typeTemplate,document.querySelector(".selected-temaplate img").setAttribute("src","./dist/assets/images/meme-demo-template-".concat(selectedElement,".webp")),changeShowElement()},showCreateMem=function(e){createMemSection.classList.contains("show")||setWidthAndHeightMem(e),document.querySelector("body").classList.toggle("no-scroll"),createMemSection.classList.toggle("show"),useYourPhoto=!1},setWidthAndHeightMem=function(e){var t;useYourPhoto?(t=URL.createObjectURL(loadFileBtn.files[0]),(image=new Image).src=t,currentlyCreatedMem.innerHTML="",image.classList.add("create-mem__img"),currentlyCreatedMem.appendChild(image),image=currentlyCreatedMem.querySelector("img")):(t=e.target.querySelector("img").src,(image=new Image).src=t,currentlyCreatedMem.innerHTML="",image.classList.add("create-mem__img"),currentlyCreatedMem.appendChild(image)),image.onload=function(){imageWidth=image.clientWidth,imageHeight=image.clientHeight,currentlyCreatedMem.classList.add("active"),canvas.style.display="block",genereteMem(imageWidth,imageHeight)}},genereteMem=function(e,t){var a,l=canvas.getContext("2d"),c=document.querySelector("[data-text-align].active-value").dataset.textAlign,n=document.querySelector("#font-size").value,i=document.querySelector("#input-stroke-style").value,o=document.querySelector("#input-color-text").value,r=document.querySelector(".font-style-btn.active-value").dataset.fontStyle,m=document.querySelector("#select-font").value,s=80,d="",u="";switch(60<n||""==n?n=60:n<10&&(n=10),canvas.width=e,canvas.height=t,l.lineWidth=Math.floor(n/4),l.textAlign=c,l.lineJoin="round",l.font="".concat(r," ").concat(n,"px ").concat(m),l.strokeStyle=i,l.drawImage(image,0,0,image.naturalWidth,image.height,0,0,e,t),a="left"==c?5:"center"==c?e/2:e-5,selectedElement){case"1":l.fillStyle="black",l.fillRect(0,0,e,s),l.fillRect(0,t-s,e,s),d=document.querySelector("#top-text").value,u=document.querySelector("#bottom-text").value,l.textBaseline="top",l.fillStyle=o,l.strokeText(d,a,3),l.fillText(d,a,3),l.textBaseline="bottom",l.strokeText(u,a,t-3),l.fillText(u,a,t-3);break;case"2":l.fillStyle="black",l.fillRect(0,0,e,s),d=document.querySelector("#top-text").value,l.textBaseline="top",l.fillStyle=o,l.strokeText(d,a,3),l.fillText(d,a,3);break;case"3":l.fillStyle="black",l.fillRect(0,t-s,e,s),u=document.querySelector("#bottom-text").value,l.fillStyle=o,l.textBaseline="bottom",l.strokeText(u,a,t-3),l.fillText(u,a,t-3);break;case"4":l.fillStyle="white",l.fillRect(0,0,e,s),l.fillRect(0,t-s,e,s),d=document.querySelector("#top-text").value,u=document.querySelector("#bottom-text").value,l.textBaseline="top",l.fillStyle=o,l.strokeText(d,a,3),l.fillText(d,a,3),l.textBaseline="bottom",l.strokeText(u,a,t-3),l.fillText(u,a,t-3);break;case"5":l.fillStyle="white",l.fillRect(0,0,e,s),d=document.querySelector("#top-text").value,l.textBaseline="top",l.fillStyle=o,l.strokeText(d,a,3),l.fillText(d,a,3);break;case"6":l.fillStyle="white",l.fillRect(0,t-s,e,s),u=document.querySelector("#bottom-text").value,l.fillStyle=o,l.textBaseline="bottom",l.strokeText(u,a,t-3),l.fillText(u,a,t-3)}},downloadMem=function(){var e=document.createElement("a");e.setAttribute("download","meme-".concat(numberOfMem,".png")),e.setAttribute("href",canvas.toDataURL("image/png").replace("image/png","image/octet-stream")),e.click(),numberOfMem++},changeSelectedElement=function(e){selectedElement=e.target.dataset.typeTemplate},changeTextAlign=function(e){document.querySelector("[data-text-align].active-value").classList.remove("active-value"),e.target.classList.add("active-value")},changeFontStyle=function(e){document.querySelector(".font-style-btn.active-value").classList.remove("active-value"),e.target.classList.add("active-value")},changeImage=function(e){e=e.target.src;(image=new Image).src=e,currentlyCreatedMem.innerHTML="",image.classList.add("create-mem__img"),currentlyCreatedMem.appendChild(image),(image=currentlyCreatedMem.querySelector("img")).onload=function(){imageWidth=image.clientWidth,imageHeight=image.clientHeight,currentlyCreatedMem.classList.add("active"),canvas.style.display="block",genereteMem(imageWidth,imageHeight)}},backToSelectTemplate=function(){document.querySelector("body").classList.toggle("no-scroll"),createMemSection.classList.toggle("show"),setImageSection.classList.toggle("show"),canvas.style.display="none"},openChangeTemplateSection=function(){changeTemplateSect.classList.add("show")},closeChangeTemplateSection=function(){changeTemplateSect.classList.remove("show")},changeTemplate=function(e){document.querySelector(".selected-temaplate img").setAttribute("src",e.target.src),selectedElement=e.target.dataset.typeTemplate,genereteMem(imageWidth,imageHeight),closeChangeTemplateSection()},addOwnImage=function(e){e=URL.createObjectURL(e.target.files[0]);(image=new Image).src=e,currentlyCreatedMem.innerHTML="",image.classList.add("create-mem__img"),currentlyCreatedMem.appendChild(image),(image=currentlyCreatedMem.querySelector("img")).onload=function(){imageWidth=image.clientWidth,imageHeight=image.clientHeight,currentlyCreatedMem.classList.add("active"),canvas.style.display="block",genereteMem(imageWidth,imageHeight)},useYourPhoto=!0};useYourPhotoBtn.addEventListener("click",showCreateMem),loadFileBtn.addEventListener("change",addOwnImage),downloadBtn.addEventListener("click",downloadMem),changeTemplateBtn.addEventListener("click",openChangeTemplateSection),closeChangeTemplateBtn.addEventListener("click",closeChangeTemplateSection),changeTemplateImages.forEach(function(e){return e.addEventListener("click",changeTemplate)}),closeCanvasBtn.addEventListener("click",backToSelectTemplate),openCanvasBtn.addEventListener("click",changeShowElement),backBtn.addEventListener("click",changeShowElement);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyYXRlTWVtLmpzIl0sIm5hbWVzIjpbInNlbGVjdGVkRWxlbWVudCIsImltYWdlIiwiaW1hZ2VXaWR0aCIsImltYWdlSGVpZ2h0IiwiYWxsVGVtYXBsYXRlSXRlbXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZWxlY3RUZW1wbGF0ZVNlY3Rpb24iLCJxdWVyeVNlbGVjdG9yIiwic2V0SW1hZ2VTZWN0aW9uIiwiYmFja1RvU2VsZWN0VGVtcGxhdGVTZWNpb250QnRuIiwiY3JlYXRlTWVtU2VjdGlvbiIsImxvYWRGaWxlQnRuIiwiY3JlYXRlTWVtQmFja0J0biIsImN1cnJlbnRseUNyZWF0ZWRNZW0iLCJhbGxTdGFuZGFyZEltYWdlIiwiZG93bmxvYWRNZW1CdG4iLCJjcmVhdGVNZW1Cb3giLCJjYW52YXMiLCJ0ZXh0QWxpZ25CdG5zIiwiZm9udFN0eWxlQnRucyIsImNoYW5nZVRlbXBsYXRlQnRuIiwiY2hhbmdlVGVtcGxhdGVTZWN0IiwiY2xvc2VDaGFuZ2VUZW1wbGF0ZVNlY3RCdG4iLCJ1c2VZb3VyUGhvdG8iLCJudW1iZXJPZk1lbSIsImNoYW5nZVNob3dFbGVtZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY2hvb3NlQ3VycmVudFRlbWFwbHRlIiwiZWwiLCJ0YXJnZXQiLCJkYXRhc2V0IiwidHlwZVRlbXBsYXRlIiwic2V0QXR0cmlidXRlIiwic2VsZWN0ZWRUZW1wbGF0ZUltZyIsInNob3dDcmVhdGVNZW0iLCJzZXRXaWR0aEFuZEhlaWdodE1lbSIsImNvbnRhaW5zIiwiaW1hZ2VEYXRhVXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiZmlsZXMiLCJzcmMiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsImNsaWVudFdpZHRoIiwiYWRkIiwiZ2VuZXJldGVNZW0iLCJjdHgiLCJnZXRDb250ZXh0IiwidGV4dEJvdHRvbSIsInlPZmZzZXQiLCJmb250U2l6ZSIsInRleHRBbGlnbiIsImZpbGxTdHlsZSIsInZhbHVlIiwiZm9udFN0eWxlIiwiZm9udEZhbWlsbHkiLCJmcmFtZVRoaWNrbmVzcyIsInhPZlRleHQiLCJ0ZXh0VG9wIiwid2lkdGgiLCJoZWlnaHQiLCJsaW5lV2lkdGgiLCJNYXRoIiwiZmxvb3IiLCJ0ZXh0YWxpZ24iLCJsaW5lSm9pbiIsImZvbnQiLCJjb25jYXQiLCJzdHJva2VTdHlsZSIsImRyYXdJbWFnZSIsImZpbGxSZWN0IiwiZmlsbFRleHQiLCJzdHJva2VUZXh0IiwidGV4dEJhc2VsaW5lIiwiZG93bmxvYWRNZW0iLCJsaW5rIiwiY3JlYXRlRWxlbWVudCIsImNoYW5nZVNlbGVjdGVkRWxlbWVudCIsInRvRGF0YVVSTCIsImN1cnJlbnRUZXh0QWxpZ24iLCJyZW1vdmUiLCJjaGFuZ2VUZXh0QWxpZ24iLCJjaGFuZ2VGb250U3R5bGUiLCJjdXJyZW50Rm9udFN0eWxlIiwiY2hhbmdlSW1hZ2UiLCJzdHlsZSIsIm9ubG9hZCIsImNsaWVudEhlaWdodCIsImJhY2tUb1NlbGVjdFRlbXBsYXRlIiwib3BlbkNoYW5nZVRlbXBsYXRlU2VjdGlvbiIsImRpc3BsYXkiLCJjaGFuZ2VUZW1wbGF0ZSIsImFkZE93bkltYWdlIiwidXNlWW91clBob3RvQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRvd25sb2FkQnRuIiwiY2xvc2VDaGFuZ2VUZW1wbGF0ZUJ0biIsImNoYW5nZVRlbXBsYXRlSW1hZ2VzIiwiYmFja0J0biIsImNsb3NlQ2hhbmdlVGVtcGxhdGVTZWN0aW9uIiwiZm9yRWFjaCIsImNsb3NlQ2FudmFzQnRuIiwib3BlbkNhbnZhc0J0biJdLCJtYXBwaW5ncyI6ImFBTUEsSUFzR0FBLGdCQVlBQyxNQU1BQyxXQU1BQyxZQTlIQUMsa0JBQUFDLFNBQUFDLGlCQUFBLG1DQUFBLEVBTUFDLHNCQUFBRixTQUFBRyxjQUFBLG1CQUFBLEVBTUFDLGdCQUFBSixTQUFBRyxjQUFBLFlBQUEsRUFNQUUsK0JBQUFMLFNBQUFHLGNBQUEsa0JBQUEsRUFNQUcsaUJBQUFOLFNBQUFHLGNBQUEsYUFBQSxFQU1BSSxZQUFB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QUEsRUFDcEJqQyxvQkFBQStCLFlBQUE1QyxLQUFBLEdBVENBLE1BQVFhLG9CQUFvQk4sY0FBYyxLQUFLLEdBV2pEaUYsT0FBQSxXQVRJdkYsV0FBYUQsTUFBTTZDLFlBV3ZCa0QsWUFBZ0JDLE1BQUFBLGFBQ2hCckYsb0JBQVlxRixVQUFpQmxELElBQVEsUUFBRWdELEVBQ3ZDRyxPQUFXVixNQUFDUyxRQUFBQSxRQUNaNUUsWUFBQUEsV0FBa0I0RSxXQUFpQixDQUNuQ0UsRUFDQUMsYUFBQUEsQ0FBQUEsQ0FUQSxFQWNBQyxnQkFBUUosaUJBQXdCLFFBQUV2RSxhQUFrQixFQVRwRGQsWUFBWXFGLGlCQUFpQixTQUFVRixXQUFXLEVBQ2xERyxZQUFZRCxpQkFBaUIsUUFBU3BCLFdBQVcsRUFDakR4RCxrQkFBa0I0RSxpQkFBaUIsUUFBU0wseUJBQXlCLEVBQ3JFTyx1QkFBdUJGLGlCQUFpQixRQUFTSywwQkFBMEIsRUFDM0VGLHFCQUFxQkcsUUFBUSxTQUFDekUsR0FBRSxPQUM5QkEsRUFBR21FLGlCQUFpQixRQUFTSCxjQUFjLENBQUMsQ0FBQSxFQUU5Q1UsZUFBZVAsaUJBQWlCLFFBQVNOLG9CQUFvQixFQUM3RGMsY0FBY1IsaUJBQWlCLFFBQVN2RSxpQkFBaUIsRUFDekQyRSxRQUFRSixpQkFBaUIsUUFBU3ZFLGlCQUFpQiIsImZpbGUiOiJnZW5lcmF0ZU1lbS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQG1vZHVsZSBnZW5lcmF0ZU1lbUpTIC0gU2tyeXB0IHphcnrEhWR6YWrEhWN5IGdlbmVyYXRvcmVtIG1lbcOzd1xyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBQb2JyYW5pZSB3c3p5c3RraWNoIGVsZW1lbnTDs3cgbyBrbGFzaWUgXCJzZWxlY3QtdGVtYXBsYXRlX19jYXJvdXNlbC1pdGVtXCIuXHJcbiAqIEB0eXBlIHtOb2RlTGlzdH1cclxuICovXHJcbmNvbnN0IGFsbFRlbWFwbGF0ZUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWxlY3QtdGVtYXBsYXRlX19jYXJvdXNlbC1pdGVtIFwiKTtcclxuXHJcbi8qKlxyXG4gKiBQb2JyYW5pZSBlbGVtZW50dSBvIGtsYXNpZSBcInNlbGVjdC10ZW1hcGxhdGVcIi5cclxuICogQHR5cGUge0VsZW1lbnR9XHJcbiAqL1xyXG5jb25zdCBzZWxlY3RUZW1wbGF0ZVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdC10ZW1hcGxhdGVcIik7XHJcblxyXG4vKipcclxuICogUG9icmFuaWUgZWxlbWVudHUgbyBrbGFzaWUgXCJzZXQtaW1hZ2VcIi5cclxuICogQHR5cGUge0VsZW1lbnR9XHJcbiAqL1xyXG5jb25zdCBzZXRJbWFnZVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldC1pbWFnZVwiKTtcclxuXHJcbi8qKlxyXG4gKiBQb2JyYW5pZSBlbGVtZW50dSBvIGtsYXNpZSBcInNldC1pbWFnZV9fYmFja1wiLlxyXG4gKiBAdHlwZSB7RWxlbWVudH1cclxuICovXHJcbmNvbnN0IGJhY2tUb1NlbGVjdFRlbXBsYXRlU2VjaW9udEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2V0LWltYWdlX19iYWNrXCIpO1xyXG5cclxuLyoqXHJcbiAqIFBvYnJhbmllIGVsZW1lbnR1IG8ga2xhc2llIFwiY3JlYXRlLW1lbVwiLlxyXG4gKiBAdHlwZSB7RWxlbWVudH1cclxuICovXHJcbmNvbnN0IGNyZWF0ZU1lbVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyZWF0ZS1tZW1cIik7XHJcblxyXG4vKipcclxuICogUG9icmFuaWUgZWxlbWVudHUgbyBrbGFzaWUgXCJhZGQtZmlsZVwiLlxyXG4gKiBAdHlwZSB7RWxlbWVudH1cclxuICovXHJcbmNvbnN0IGxvYWRGaWxlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtZmlsZVwiKTtcclxuXHJcbi8qKlxyXG4gKiBQb2JyYW5pZSBlbGVtZW50dSBvIGtsYXNpZSBcImJhY2tcIiB3ZXduxIV0cnogY3JlYXRlTWVtU2VjdGlvbi5cclxuICogQHR5cGUge0VsZW1lbnR9XHJcbiAqL1xyXG5jb25zdCBjcmVhdGVNZW1CYWNrQnRuID0gY3JlYXRlTWVtU2VjdGlvbi5xdWVyeVNlbGVjdG9yKFwiLmJhY2tcIik7XHJcblxyXG4vKipcclxuICogUG9icmFuaWUgZWxlbWVudHUgbyBrbGFzaWUgXCJjcmVhdGUtbWVtX19pbWctYm94XCIgd2V3bsSFdHJ6IGNyZWF0ZU1lbVNlY3Rpb24uXHJcbiAqIEB0eXBlIHtFbGVtZW50fVxyXG4gKi9cclxuY29uc3QgY3VycmVudGx5Q3JlYXRlZE1lbSA9IGNyZWF0ZU1lbVNlY3Rpb24ucXVlcnlTZWxlY3RvcihcIi5jcmVhdGUtbWVtX19pbWctYm94XCIpO1xyXG5cclxuLyoqXHJcbiAqIFBvYnJhbmllIHdzenlzdGtpY2ggZWxlbWVudMOzdyBvIGtsYXNpZSBcInN0YW5kYXJkLXRoZW1lX19pdGVtXCIuXHJcbiAqIEB0eXBlIHtOb2RlTGlzdH1cclxuICovXHJcbmNvbnN0IGFsbFN0YW5kYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN0YW5kYXJkLXRoZW1lX19pdGVtXCIpO1xyXG5cclxuLyoqXHJcbiAqIFBvYnJhbmllIGVsZW1lbnR1IG8ga2xhc2llIFwiZG93bmxvYWQtbWVtXCIuXHJcbiAqIEB0eXBlIHtFbGVtZW50fVxyXG4gKi9cclxuY29uc3QgZG93bmxvYWRNZW1CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRvd25sb2FkLW1lbVwiKTtcclxuXHJcbi8qKlxyXG4gKiBQb2JyYW5pZSBlbGVtZW50dSBvIGtsYXNpZSBcImNyZWF0ZS1tZW1fX21lbS1ib3hcIi5cclxuICogQHR5cGUge0VsZW1lbnR9XHJcbiAqL1xyXG5jb25zdCBjcmVhdGVNZW1Cb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyZWF0ZS1tZW1fX21lbS1ib3hcIik7XHJcblxyXG4vKipcclxuICogUG9icmFuaWUgZWxlbWVudHUgbyBpZCBcImNhbnZhcy1tZW1cIi5cclxuICogQHR5cGUge0VsZW1lbnR9XHJcbiAqL1xyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbnZhcy1tZW1cIik7XHJcblxyXG4vKipcclxuICogUG9icmFuaWUgd3N6eXN0a2ljaCBlbGVtZW50w7N3IHBhc3VqxIVjeWNoIGRvIHNlbGVrdG9yYSBcIltkYXRhLXRleHQtYWxpZ25dXCIuXHJcbiAqIEB0eXBlIHtOb2RlTGlzdH1cclxuICovXHJcbmNvbnN0IHRleHRBbGlnbkJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdGV4dC1hbGlnbl1cIik7XHJcblxyXG4vKipcclxuICogUG9icmFuaWUgd3N6eXN0a2ljaCBlbGVtZW50w7N3IG8ga2xhc2llIFwiZm9udC1zdHlsZS1idG5cIi5cclxuICogQHR5cGUge05vZGVMaXN0fVxyXG4gKi9cclxuY29uc3QgZm9udFN0eWxlQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9udC1zdHlsZS1idG5cIik7XHJcblxyXG4vKipcclxuICogUG9icmFuaWUgZWxlbWVudHUgbyBrbGFzaWUgXCJjcmVhdGUtbWVtX19jaGFuZ2UtdGVtcGxhdGVcIi5cclxuICogQHR5cGUge0VsZW1lbnR9XHJcbiAqL1xyXG5jb25zdCBjaGFuZ2VUZW1wbGF0ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3JlYXRlLW1lbV9fY2hhbmdlLXRlbXBsYXRlXCIpO1xyXG5cclxuLyoqXHJcbiAqIFBvYnJhbmllIGVsZW1lbnR1IG8ga2xhc2llIFwiY2hhbmdlLXRlbXBsYXRlXCIuXHJcbiAqIEB0eXBlIHtFbGVtZW50fVxyXG4gKi9cclxuY29uc3QgY2hhbmdlVGVtcGxhdGVTZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGFuZ2UtdGVtcGxhdGVcIik7XHJcblxyXG4vKipcclxuICogUG9icmFuaWUgZWxlbWVudHUgbyBrbGFzaWUgXCJjbG9zZS1idG5cIiB3ZXduxIV0cnogY2hhbmdlVGVtcGxhdGVTZWN0LlxyXG4gKiBAdHlwZSB7RWxlbWVudH1cclxuICovXHJcbmNvbnN0IGNsb3NlQ2hhbmdlVGVtcGxhdGVTZWN0QnRuID0gY2hhbmdlVGVtcGxhdGVTZWN0LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2UtYnRuXCIpO1xyXG5cclxuLyoqXHJcbiAqIFptaWVubmEgcHJ6ZWNob3d1asSFY2Egd3licmFueSBlbGVtZW50LlxyXG4gKiBAdHlwZSB7c3RyaW5nfVxyXG4gKi9cclxubGV0IHNlbGVjdGVkRWxlbWVudDtcclxuXHJcbi8qKlxyXG4gKiBGbGFnYSBpbmZvcm11asSFY2EsIGN6eSB1xbx5d2FuZSBqZXN0IHfFgmFzbmUgemRqxJljaWUuXHJcbiAqIEB0eXBlIHtib29sZWFufVxyXG4gKi9cclxubGV0IHVzZVlvdXJQaG90byA9IGZhbHNlO1xyXG5cclxuLyoqXHJcbiAqIE9icmF6ZWsuXHJcbiAqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fVxyXG4gKi9cclxubGV0IGltYWdlO1xyXG5cclxuLyoqXHJcbiAqIFN6ZXJva2/Fm8SHIG9icmF6a2EuXHJcbiAqIEB0eXBlIHtudW1iZXJ9XHJcbiAqL1xyXG5sZXQgaW1hZ2VXaWR0aDtcclxuXHJcbi8qKlxyXG4gKiBXeXNva2/Fm8SHIG9icmF6a2EuXHJcbiAqIEB0eXBlIHtudW1iZXJ9XHJcbiAqL1xyXG5sZXQgaW1hZ2VIZWlnaHQ7XHJcblxyXG4vKipcclxuICogTnVtZXIgbWVtYS5cclxuICogQHR5cGUge251bWJlcn1cclxuICovXHJcbmxldCBudW1iZXJPZk1lbSA9IDE7XHJcblxyXG4vKipcclxuICogRnVua2NqYSB6bWllbmlhasSFY2Egd3nFm3dpZXRsYW5lIGVsZW1lbnR5LlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXHJcbmNvbnN0IGNoYW5nZVNob3dFbGVtZW50ID0gKCkgPT4ge1xyXG4gIHNldEltYWdlU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcclxuICBzZWxlY3RUZW1wbGF0ZVNlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcbn07XHJcblxyXG4vKipcclxuICogRnVua2NqYSB3eXdvxYJ5d2FuYSBwbyB3eWJvcnplIGFrdHVhbG5lZ28gc3phYmxvbnUuXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGVsIC0gRXZlbnQgd3l3b8WCdWrEhWN5IGZ1bmtjasSZLlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXHJcbmNvbnN0IGNob29zZUN1cnJlbnRUZW1hcGx0ZSA9IChlbCkgPT4ge1xyXG4gIHNlbGVjdGVkRWxlbWVudCA9IGVsLnRhcmdldC5kYXRhc2V0LnR5cGVUZW1wbGF0ZTtcclxuICBjb25zdCBzZWxlY3RlZFRlbXBsYXRlSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWxlY3RlZC10ZW1hcGxhdGUgaW1nXCIpO1xyXG4gIHNlbGVjdGVkVGVtcGxhdGVJbWcuc2V0QXR0cmlidXRlKFxyXG4gICAgXCJzcmNcIixcclxuICAgIGAuL2Rpc3QvYXNzZXRzL2ltYWdlcy9tZW1lLWRlbW8tdGVtcGxhdGUtJHtzZWxlY3RlZEVsZW1lbnR9LndlYnBgXHJcbiAgKTtcclxuICBjaGFuZ2VTaG93RWxlbWVudCgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZ1bmtjamEgd3nFm3dpZXRsYWrEhWNhIHNla2NqxJkgdHdvcnplbmlhIG1lbWEuXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGVsIC0gRXZlbnQgd3l3b8WCdWrEhWN5IGZ1bmtjasSZLlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXHJcbmNvbnN0IHNob3dDcmVhdGVNZW0gPSAoZWwpID0+IHtcclxuICBpZiAoIWNyZWF0ZU1lbVNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvd1wiKSkge1xyXG4gICAgc2V0V2lkdGhBbmRIZWlnaHRNZW0oZWwpO1xyXG4gIH1cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5jbGFzc0xpc3QudG9nZ2xlKFwibm8tc2Nyb2xsXCIpO1xyXG4gIGNyZWF0ZU1lbVNlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcbiAgdXNlWW91clBob3RvID0gZmFsc2U7XHJcbn07XHJcblxyXG4vKipcclxuICogRnVua2NqYSB1c3Rhd2lhasSFY2Egc3plcm9rb8WbxIcgaSB3eXNva2/Fm8SHIG1lbWEuXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGVsIC0gRXZlbnQgd3l3b8WCdWrEhWN5IGZ1bmtjasSZLlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXHJcbmNvbnN0IHNldFdpZHRoQW5kSGVpZ2h0TWVtID0gKGVsKSA9PiB7XHJcbiAgaWYgKHVzZVlvdXJQaG90bykge1xyXG4gICAgY29uc3QgaW1hZ2VEYXRhVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChsb2FkRmlsZUJ0bi5maWxlc1swXSk7XHJcbiAgICBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgaW1hZ2Uuc3JjID0gaW1hZ2VEYXRhVXJsO1xyXG4gICAgY3VycmVudGx5Q3JlYXRlZE1lbS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcImNyZWF0ZS1tZW1fX2ltZ1wiKTtcclxuICAgIGN1cnJlbnRseUNyZWF0ZWRNZW0uYXBwZW5kQ2hpbGQoaW1hZ2UpO1xyXG4gICAgaW1hZ2UgPSBjdXJyZW50bHlDcmVhdGVkTWVtLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IGltYWdlRGF0YVVybCA9IGVsLnRhcmdldC5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpLnNyYztcclxuICAgIGltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICBpbWFnZS5zcmMgPSBpbWFnZURhdGFVcmw7XHJcbiAgICBjdXJyZW50bHlDcmVhdGVkTWVtLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKFwiY3JlYXRlLW1lbV9faW1nXCIpO1xyXG4gICAgY3VycmVudGx5Q3JlYXRlZE1lbS5hcHBlbmRDaGlsZChpbWFnZSk7XHJcbiAgfVxyXG4gIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGltYWdlV2lkdGggPSBpbWFnZS5jbGllbnRXaWR0aDtcclxuICAgIGltYWdlSGVpZ2h0ID0gaW1hZ2UuY2xpZW50SGVpZ2h0O1xyXG4gICAgY3VycmVudGx5Q3JlYXRlZE1lbS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICBnZW5lcmV0ZU1lbShpbWFnZVdpZHRoLCBpbWFnZUhlaWdodCk7XHJcbiAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGdW5rY2phIGdlbmVydWrEhWNhIG1lbS5cclxuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIC0gU3plcm9rb8WbxIcgbWVtYS5cclxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFd5c29rb8WbxIcgbWVtYS5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5jb25zdCBnZW5lcmV0ZU1lbSA9ICh3aWR0aCwgaGVpZ2h0KSA9PiB7XHJcbiAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICBjb25zdCB5T2Zmc2V0ID0gMztcclxuICBjb25zdCB0ZXh0YWxpZ24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtdGV4dC1hbGlnbl0uYWN0aXZlLXZhbHVlXCIpLmRhdGFzZXQudGV4dEFsaWduO1xyXG5cclxuICBsZXQgZm9udFNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZvbnQtc2l6ZVwiKS52YWx1ZTtcclxuICBjb25zdCBzdHJva2VTdHlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtc3Ryb2tlLXN0eWxlXCIpLnZhbHVlO1xyXG4gIGNvbnN0IGZpbGxTdHlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtY29sb3ItdGV4dFwiKS52YWx1ZTtcclxuICBjb25zdCBmb250U3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvbnQtc3R5bGUtYnRuLmFjdGl2ZS12YWx1ZVwiKS5kYXRhc2V0LmZvbnRTdHlsZTtcclxuICBjb25zdCBmb250RmFtaWxseSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2VsZWN0LWZvbnRcIikudmFsdWU7XHJcbiAgY29uc3QgZnJhbWVUaGlja25lc3MgPSA4MDtcclxuICBsZXQgeE9mVGV4dCwgdGV4dFRvcCA9IFwiXCIsIHRleHRCb3R0b20gPSBcIlwiO1xyXG4gIGlmIChmb250U2l6ZSA+IDYwIHx8IGZvbnRTaXplID09IFwiXCIpIHtcclxuICAgIGZvbnRTaXplID0gNjA7XHJcbiAgfSBlbHNlIGlmIChmb250U2l6ZSA8IDEwKSB7XHJcbiAgICBmb250U2l6ZSA9IDEwO1xyXG4gIH1cclxuICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gIGN0eC5saW5lV2lkdGggPSBNYXRoLmZsb29yKGZvbnRTaXplIC8gNCk7XHJcbiAgY3R4LnRleHRBbGlnbiA9IHRleHRhbGlnbjtcclxuICBjdHgubGluZUpvaW4gPSBcInJvdW5kXCI7XHJcbiAgY3R4LmZvbnQgPSBgJHtmb250U3R5bGV9ICR7Zm9udFNpemV9cHggJHtmb250RmFtaWxseX1gO1xyXG4gIGN0eC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xyXG4gIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICBpbWFnZSxcclxuICAgIDAsXHJcbiAgICAwLFxyXG4gICAgaW1hZ2UubmF0dXJhbFdpZHRoLFxyXG4gICAgaW1hZ2UuaGVpZ2h0LFxyXG4gICAgMCxcclxuICAgIDAsXHJcbiAgICB3aWR0aCxcclxuICAgIGhlaWdodFxyXG4gICk7XHJcbiAgaWYgKHRleHRhbGlnbiA9PSBcImxlZnRcIikge1xyXG4gICAgeE9mVGV4dCA9IDU7XHJcbiAgfSBlbHNlIGlmICh0ZXh0YWxpZ24gPT0gXCJjZW50ZXJcIikge1xyXG4gICAgeE9mVGV4dCA9IHdpZHRoIC8gMjtcclxuICB9IGVsc2Uge1xyXG4gICAgeE9mVGV4dCA9IHdpZHRoIC0gNTtcclxuICB9XHJcbiAgc3dpdGNoIChzZWxlY3RlZEVsZW1lbnQpIHtcclxuICAgIGNhc2UgXCIxXCI6XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgZnJhbWVUaGlja25lc3MpO1xyXG4gICAgICBjdHguZmlsbFJlY3QoMCwgaGVpZ2h0IC0gZnJhbWVUaGlja25lc3MsIHdpZHRoLCBmcmFtZVRoaWNrbmVzcyk7XHJcbiAgICAgIHRleHRUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvcC10ZXh0XCIpLnZhbHVlO1xyXG4gICAgICB0ZXh0Qm90dG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib3R0b20tdGV4dFwiKS52YWx1ZTtcclxuICAgICAgY3R4LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XHJcbiAgICAgIGN0eC5zdHJva2VUZXh0KHRleHRUb3AsIHhPZlRleHQsIHlPZmZzZXQpO1xyXG4gICAgICBjdHguZmlsbFRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcbiAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSBcImJvdHRvbVwiO1xyXG4gICAgICBjdHguc3Ryb2tlVGV4dCh0ZXh0Qm90dG9tLCB4T2ZUZXh0LCBoZWlnaHQgLSB5T2Zmc2V0KTtcclxuICAgICAgY3R4LmZpbGxUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCIyXCI6XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgZnJhbWVUaGlja25lc3MpO1xyXG4gICAgICB0ZXh0VG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b3AtdGV4dFwiKS52YWx1ZTtcclxuICAgICAgY3R4LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XHJcbiAgICAgIGN0eC5zdHJva2VUZXh0KHRleHRUb3AsIHhPZlRleHQsIHlPZmZzZXQpO1xyXG4gICAgICBjdHguZmlsbFRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIjNcIjpcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgICAgY3R4LmZpbGxSZWN0KDAsIGhlaWdodCAtIGZyYW1lVGhpY2tuZXNzLCB3aWR0aCwgZnJhbWVUaGlja25lc3MpO1xyXG4gICAgICB0ZXh0Qm90dG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib3R0b20tdGV4dFwiKS52YWx1ZTtcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcclxuICAgICAgY3R4LnRleHRCYXNlbGluZSA9IFwiYm90dG9tXCI7XHJcbiAgICAgIGN0eC5zdHJva2VUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG4gICAgICBjdHguZmlsbFRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIjRcIjpcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcclxuICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBmcmFtZVRoaWNrbmVzcyk7XHJcbiAgICAgIGN0eC5maWxsUmVjdCgwLCBoZWlnaHQgLSBmcmFtZVRoaWNrbmVzcywgd2lkdGgsIGZyYW1lVGhpY2tuZXNzKTtcclxuICAgICAgdGV4dFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9wLXRleHRcIikudmFsdWU7XHJcbiAgICAgIHRleHRCb3R0b20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JvdHRvbS10ZXh0XCIpLnZhbHVlO1xyXG4gICAgICBjdHgudGV4dEJhc2VsaW5lID0gXCJ0b3BcIjtcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcclxuICAgICAgY3R4LnN0cm9rZVRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcbiAgICAgIGN0eC5maWxsVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuICAgICAgY3R4LnRleHRCYXNlbGluZSA9IFwiYm90dG9tXCI7XHJcbiAgICAgIGN0eC5zdHJva2VUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG4gICAgICBjdHguZmlsbFRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIjVcIjpcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcclxuICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBmcmFtZVRoaWNrbmVzcyk7XHJcbiAgICAgIHRleHRUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvcC10ZXh0XCIpLnZhbHVlO1xyXG4gICAgICBjdHgudGV4dEJhc2VsaW5lID0gXCJ0b3BcIjtcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcclxuICAgICAgY3R4LnN0cm9rZVRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcbiAgICAgIGN0eC5maWxsVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiNlwiOlxyXG4gICAgICBjdHguZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xyXG4gICAgICBjdHguZmlsbFJlY3QoMCwgaGVpZ2h0IC0gZnJhbWVUaGlja25lc3MsIHdpZHRoLCBmcmFtZVRoaWNrbmVzcyk7XHJcbiAgICAgIHRleHRCb3R0b20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JvdHRvbS10ZXh0XCIpLnZhbHVlO1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xyXG4gICAgICBjdHgudGV4dEJhc2VsaW5lID0gXCJib3R0b21cIjtcclxuICAgICAgY3R4LnN0cm9rZVRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcbiAgICAgIGN0eC5maWxsVGV4dCh0ZXh0Qm90dG9tLCB4T2ZUZXh0LCBoZWlnaHQgLSB5T2Zmc2V0KTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZ1bmtjamEgcG9iaWVyYWrEhWNhIGRhbmUgbWVtYSBpIHByemVraWVyb3d1asSFY2EgZG8gcG9icmFuaWEuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cclxuY29uc3QgZG93bmxvYWRNZW0gPSAoKSA9PiB7XHJcbiAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gIGxpbmsuc2V0QXR0cmlidXRlKFwiZG93bmxvYWRcIiwgYG1lbWUtJHtudW1iZXJPZk1lbX0ucG5nYCk7XHJcbiAgbGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIikucmVwbGFjZShcImltYWdlL3BuZ1wiLCBcImltYWdlL29jdGV0LXN0cmVhbVwiKSk7XHJcbiAgbGluay5jbGljaygpO1xyXG4gIG51bWJlck9mTWVtKys7XHJcbn07XHJcblxyXG4vKipcclxuICogRnVua2NqYSBvYnPFgnVndWrEhWNhIHptaWFuxJkgd3licmFuZWdvIGVsZW1lbnR1LlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBlbCAtIEV2ZW50IHd5d2/FgnVqxIVjeSBmdW5rY2rEmS5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5jb25zdCBjaGFuZ2VTZWxlY3RlZEVsZW1lbnQgPSAoZWwpID0+IHtcclxuICBzZWxlY3RlZEVsZW1lbnQgPSBlbC50YXJnZXQuZGF0YXNldC50eXBlVGVtcGxhdGU7XHJcbn07XHJcblxyXG4vKipcclxuICogRnVua2NqYSBvYnPFgnVndWrEhWNhIHptaWFuxJkgd3licmFuZWdvIGp1c3Rvd2FuaWEgdGVrc3R1LlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBlbCAtIEV2ZW50IHd5d2/FgnVqxIVjeSBmdW5rY2rEmS5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5jb25zdCBjaGFuZ2VUZXh0QWxpZ24gPSAoZWwpID0+IHtcclxuICBjb25zdCBjdXJyZW50VGV4dEFsaWduID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLXRleHQtYWxpZ25dLmFjdGl2ZS12YWx1ZVwiKTtcclxuICBjdXJyZW50VGV4dEFsaWduLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtdmFsdWVcIik7XHJcbiAgZWwudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtdmFsdWVcIik7XHJcbn07XHJcblxyXG4vKipcclxuICogRnVua2NqYSBvYnPFgnVndWrEhWNhIHptaWFuxJkgd3licmFuZWdvIHN0eWx1IGN6Y2lvbmtpLlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBlbCAtIEV2ZW50IHd5d2/FgnVqxIVjeSBmdW5rY2rEmS5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5jb25zdCBjaGFuZ2VGb250U3R5bGUgPSAoZWwpID0+IHtcclxuICBjb25zdCBjdXJyZW50Rm9udFN0eWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb250LXN0eWxlLWJ0bi5hY3RpdmUtdmFsdWVcIik7XHJcbiAgY3VycmVudEZvbnRTdHlsZS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLXZhbHVlXCIpO1xyXG4gIGVsLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLXZhbHVlXCIpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZ1bmtjamEgb2JzxYJ1Z3VqxIVjYSB6bWlhbsSZIHpkasSZY2lhIHcgc2VrY2ppIHVzdGF3aWFuaWEgb2JyYXprYS5cclxuICogQHBhcmFtIHtFdmVudH0gZWwgLSBFdmVudCB3eXdvxYJ1asSFY3kgZnVua2NqxJkuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cclxuY29uc3QgY2hhbmdlSW1hZ2UgPSAoZWwpID0+IHtcclxuICBjb25zdCBpbWFnZURhdGFVcmwgPSBlbC50YXJnZXQuc3JjO1xyXG4gIGltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgaW1hZ2Uuc3JjID0gaW1hZ2VEYXRhVXJsO1xyXG4gIGN1cnJlbnRseUNyZWF0ZWRNZW0uaW5uZXJIVE1MID0gXCJcIjtcclxuICBpbWFnZS5jbGFzc0xpc3QuYWRkKFwiY3JlYXRlLW1lbV9faW1nXCIpO1xyXG4gIGN1cnJlbnRseUNyZWF0ZWRNZW0uYXBwZW5kQ2hpbGQoaW1hZ2UpO1xyXG4gIGltYWdlID0gY3VycmVudGx5Q3JlYXRlZE1lbS5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpO1xyXG4gIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGltYWdlV2lkdGggPSBpbWFnZS5jbGllbnRXaWR0aDtcclxuICAgIGltYWdlSGVpZ2h0ID0gaW1hZ2UuY2xpZW50SGVpZ2h0O1xyXG4gICAgY3VycmVudGx5Q3JlYXRlZE1lbS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICBnZW5lcmV0ZU1lbShpbWFnZVdpZHRoLCBpbWFnZUhlaWdodCk7XHJcbiAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGdW5rY2phIG9ic8WCdWd1asSFY2EgcG93csOzdCBkbyBzZWtjamkgd3lib3J1IHN6YWJsb251LlxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXHJcbmNvbnN0IGJhY2tUb1NlbGVjdFRlbXBsYXRlID0gKCkgPT4ge1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLmNsYXNzTGlzdC50b2dnbGUoXCJuby1zY3JvbGxcIik7XHJcbiAgY3JlYXRlTWVtU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcclxuICBzZXRJbWFnZVNlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcbiAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGdW5rY2phIG9ic8WCdWd1asSFY2Egb3R3YXJjaWUgc2VrY2ppIHptaWFueSBzemFibG9udS5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5jb25zdCBvcGVuQ2hhbmdlVGVtcGxhdGVTZWN0aW9uID0gKCkgPT4ge1xyXG4gIGNoYW5nZVRlbXBsYXRlU2VjdC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGdW5rY2phIG9ic8WCdWd1asSFY2EgemFta25pxJljaWUgc2VrY2ppIHptaWFueSBzemFibG9udS5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5jb25zdCBjbG9zZUNoYW5nZVRlbXBsYXRlU2VjdGlvbiA9ICgpID0+IHtcclxuICBjaGFuZ2VUZW1wbGF0ZVNlY3QuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbn07XHJcblxyXG4vKipcclxuICogRnVua2NqYSBvYnPFgnVndWrEhWNhIHptaWFuxJkgYWt0dWFsbmVnbyBzemFibG9udS5cclxuICogQHBhcmFtIHtFdmVudH0gZWwgLSBFdmVudCB3eXdvxYJ1asSFY3kgZnVua2NqxJkuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cclxuY29uc3QgY2hhbmdlVGVtcGxhdGUgPSAoZWwpID0+IHtcclxuICBjb25zdCBzZWxlY3RlZFRlbXBsYXRlSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWxlY3RlZC10ZW1hcGxhdGUgaW1nXCIpO1xyXG4gIHNlbGVjdGVkVGVtcGxhdGVJbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIGVsLnRhcmdldC5zcmMpO1xyXG4gIHNlbGVjdGVkRWxlbWVudCA9IGVsLnRhcmdldC5kYXRhc2V0LnR5cGVUZW1wbGF0ZTtcclxuICBnZW5lcmV0ZU1lbShpbWFnZVdpZHRoLCBpbWFnZUhlaWdodCk7XHJcbiAgY2xvc2VDaGFuZ2VUZW1wbGF0ZVNlY3Rpb24oKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGdW5rY2phIG9ic8WCdWd1asSFY2EgZG9kYW5pZSB3xYJhc25lZ28gb2JyYXprYS5cclxuICogQHBhcmFtIHtFdmVudH0gZWwgLSBFdmVudCB3eXdvxYJ1asSFY3kgZnVua2NqxJkuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cclxuY29uc3QgYWRkT3duSW1hZ2UgPSAoZWwpID0+IHtcclxuICBjb25zdCBpbWFnZURhdGFVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGVsLnRhcmdldC5maWxlc1swXSk7XHJcbiAgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICBpbWFnZS5zcmMgPSBpbWFnZURhdGFVcmw7XHJcbiAgY3VycmVudGx5Q3JlYXRlZE1lbS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJjcmVhdGUtbWVtX19pbWdcIik7XHJcbiAgY3VycmVudGx5Q3JlYXRlZE1lbS5hcHBlbmRDaGlsZChpbWFnZSk7XHJcbiAgaW1hZ2UgPSBjdXJyZW50bHlDcmVhdGVkTWVtLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIik7XHJcbiAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaW1hZ2VXaWR0aCA9IGltYWdlLmNsaWVudFdpZHRoO1xyXG4gICAgaW1hZ2VIZWlnaHQgPSBpbWFnZS5jbGllbnRIZWlnaHQ7XHJcbiAgICBjdXJyZW50bHlDcmVhdGVkTWVtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICBjYW52YXMuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIGdlbmVyZXRlTWVtKGltYWdlV2lkdGgsIGltYWdlSGVpZ2h0KTtcclxuICB9O1xyXG4gIHVzZVlvdXJQaG90byA9IHRydWU7XHJcbn07XHJcblxyXG4vLyBFdmVudCBsaXN0ZW5lcnNcclxuXHJcbnVzZVlvdXJQaG90b0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2hvd0NyZWF0ZU1lbSk7XHJcbmxvYWRGaWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgYWRkT3duSW1hZ2UpO1xyXG5kb3dubG9hZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZG93bmxvYWRNZW0pO1xyXG5jaGFuZ2VUZW1wbGF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkNoYW5nZVRlbXBsYXRlU2VjdGlvbik7XHJcbmNsb3NlQ2hhbmdlVGVtcGxhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQ2hhbmdlVGVtcGxhdGVTZWN0aW9uKTtcclxuY2hhbmdlVGVtcGxhdGVJbWFnZXMuZm9yRWFjaCgoZWwpID0+XHJcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNoYW5nZVRlbXBsYXRlKVxyXG4pO1xyXG5jbG9zZUNhbnZhc0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYmFja1RvU2VsZWN0VGVtcGxhdGUpO1xyXG5vcGVuQ2FudmFzQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VTaG93RWxlbWVudCk7XHJcbmJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNoYW5nZVNob3dFbGVtZW50KTtcclxuIl19
