"use strict";var selectedElement,image,imageWidth,imageHeight,allTemaplateItems=document.querySelectorAll(".select-temaplate__carousel-item "),selectTemplateSection=document.querySelector(".select-temaplate"),setImageSection=document.querySelector(".set-image"),backToSelectTemplateSeciontBtn=document.querySelector(".set-image__back"),createMemSection=document.querySelector(".create-mem"),loadFileBtn=document.querySelector(".add-file"),createMemBackBtn=createMemSection.querySelector(".back"),currentlyCreatedMem=createMemSection.querySelector(".create-mem__img-box"),allStandardImage=document.querySelectorAll(".standard-theme__item"),downloadMemBtn=document.querySelector(".download-mem"),createMemBox=document.querySelector(".create-mem__mem-box"),canvas=document.querySelector("#canvas-mem"),textAlignBtns=document.querySelectorAll("[data-text-align]"),fontStyleBtns=document.querySelectorAll(".font-style-btn"),changeTemplateBtn=document.querySelector(".create-mem__change-template"),changeTemplateSect=document.querySelector(".change-template"),closeChangeTemplateSectBtn=changeTemplateSect.querySelector(".close-btn"),useYourPhoto=!1,numberOfMem=1,changeShowElement=function(){setImageSection.classList.toggle("show"),selectTemplateSection.classList.toggle("show")},chooseCurrentTemaplte=function(e){selectedElement=e.target.dataset.typeTemplate,document.querySelector(".selected-temaplate img").setAttribute("src","./dist/assets/images/meme-demo-template-".concat(selectedElement,".webp")),changeShowElement()},showCreateMem=function(e){createMemSection.classList.contains("show")||setWidthAndHeightMem(e),document.querySelector("body").classList.toggle("no-scroll"),createMemSection.classList.toggle("show"),useYourPhoto=!1},setWidthAndHeightMem=function(e){var t;useYourPhoto?(t=URL.createObjectURL(loadFileBtn.files[0]),(image=new Image).src=t,currentlyCreatedMem.innerHTML="",image.classList.add("create-mem__img"),currentlyCreatedMem.appendChild(image),image=currentlyCreatedMem.querySelector("img")):(t=e.target.querySelector("img").src,(image=new Image).src=t,currentlyCreatedMem.innerHTML="",image.classList.add("create-mem__img"),currentlyCreatedMem.appendChild(image)),image.onload=function(){imageWidth=image.clientWidth,imageHeight=image.clientHeight,currentlyCreatedMem.classList.add("active"),canvas.style.display="block",genereteMem(imageWidth,imageHeight)}},genereteMem=function(e,t){var l,a=canvas.getContext("2d"),c=document.querySelector("[data-text-align].active-value").dataset.textAlign,o=document.querySelector("#font-size").value,n=document.querySelector("#input-stroke-style").value,i=document.querySelector("#input-color-text").value,r=document.querySelector(".font-style-btn.active-value").dataset.fontStyle,m=document.querySelector("#select-font").value,s=80,u="",d="";switch(60<o||""==o?o=60:o<10&&(o=10),canvas.width=e,canvas.height=t,a.lineWidth=Math.floor(o/4),a.textAlign=c,a.lineJoin="round",a.font="".concat(r," ").concat(o,"px ").concat(m),a.strokeStyle=n,a.drawImage(image,0,0,image.naturalWidth,image.height,0,0,e,t),l="left"==c?5:"center"==c?e/2:e-5,selectedElement){case"1":a.fillStyle="black",a.fillRect(0,0,e,s),a.fillRect(0,t-s,e,s),u=document.querySelector("#top-text").value,d=document.querySelector("#bottom-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3),a.textBaseline="bottom",a.strokeText(d,l,t-3),a.fillText(d,l,t-3);break;case"2":a.fillStyle="black",a.fillRect(0,0,e,s),u=document.querySelector("#top-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3);break;case"3":a.fillStyle="black",a.fillRect(0,t-s,e,s),d=document.querySelector("#bottom-text").value,a.fillStyle=i,a.textBaseline="bottom",a.strokeText(d,l,t-3),a.fillText(d,l,t-3);break;case"4":a.fillStyle="white",a.fillRect(0,0,e,s),a.fillRect(0,t-s,e,s),u=document.querySelector("#top-text").value,d=document.querySelector("#bottom-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3),a.textBaseline="bottom",a.strokeText(d,l,t-3),a.fillText(d,l,t-3);break;case"5":a.fillStyle="white",a.fillRect(0,0,e,s),u=document.querySelector("#top-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3);break;case"6":a.fillStyle="white",a.fillRect(0,t-s,e,s),d=document.querySelector("#bottom-text").value,a.fillStyle=i,a.textBaseline="bottom",a.strokeText(d,l,t-3),a.fillText(d,l,t-3);break;case"7":u=document.querySelector("#top-text").value,d=document.querySelector("#bottom-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3),a.textBaseline="bottom",a.strokeText(d,l,t-3),a.fillText(d,l,t-3);break;case"8":u=document.querySelector("#top-text").value,a.textBaseline="top",a.fillStyle=i,a.strokeText(u,l,3),a.fillText(u,l,3);break;case"9":d=document.querySelector("#bottom-text").value,a.textBaseline="bottom",a.fillStyle=i,a.strokeText(d,l,t-3),a.fillText(d,l,t-3)}},downloadMem=function(){downloadMemBtn.download="meme".concat(numberOfMem,".png"),downloadMemBtn.href=canvas.toDataURL(),numberOfMem++},toggleShowChangeTemaplateSec=function(){changeTemplateSect.classList.contains("show")||changeTemplateSect.querySelectorAll(".change-template__item").forEach(function(e){e.dataset.typeTemplate==selectedElement?e.classList.add("current-template"):e.classList.remove("current-template")}),changeTemplateSect.classList.toggle("show")};allTemaplateItems.forEach(function(e){e.addEventListener("click",chooseCurrentTemaplte)}),backToSelectTemplateSeciontBtn.addEventListener("click",changeShowElement),loadFileBtn.addEventListener("change",function(){useYourPhoto=!0,showCreateMem(this)}),createMemBackBtn.addEventListener("click",function(){showCreateMem(),useYourPhoto=!1,canvas.style.display="none",currentlyCreatedMem.classList.remove("active")}),allStandardImage.forEach(function(e){e.addEventListener("click",showCreateMem)}),downloadMemBtn.addEventListener("click",downloadMem),textAlignBtns.forEach(function(e){e.addEventListener("click",function(){textAlignBtns.forEach(function(e){e.classList.remove("active-value")}),e.classList.add("active-value"),genereteMem(imageWidth,imageHeight)})}),document.querySelectorAll(".create-mem__input").forEach(function(e){e.addEventListener("input",function(){genereteMem(imageWidth,imageHeight)})}),fontStyleBtns.forEach(function(e){e.addEventListener("click",function(){fontStyleBtns.forEach(function(e){e.classList.remove("active-value")}),e.classList.add("active-value"),genereteMem(imageWidth,imageHeight)})}),[closeChangeTemplateSectBtn,changeTemplateBtn].forEach(function(e){e.addEventListener("click",toggleShowChangeTemaplateSec)}),changeTemplateSect.querySelectorAll(".change-template__item").forEach(function(e){e.addEventListener("click",function(){selectedElement=e.dataset.typeTemplate,changeTemplateSect.classList.toggle("show"),genereteMem(imageWidth,imageHeight)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyYXRlTWVtLmpzIl0sIm5hbWVzIjpbInNlbGVjdFRlbXBsYXRlU2VjdGlvbiIsImNob29zZUN1cnJlbnRUZW1hcGx0ZSIsInNlbGVjdGVkRWxlbWVudCIsImFsbFRlbWFwbGF0ZUl0ZW1zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicXVlcnlTZWxlY3RvciIsInNldEltYWdlU2VjdGlvbiIsImJhY2tUb1NlbGVjdFRlbXBsYXRlU2VjaW9udEJ0biIsImNyZWF0ZU1lbVNlY3Rpb24iLCJjcmVhdGVNZW1CYWNrQnRuIiwiY3VycmVudGx5Q3JlYXRlZE1lbSIsImFsbFN0YW5kYXJkSW1hZ2UiLCJkb3dubG9hZE1lbUJ0biIsInRleHRBbGlnbkJ0bnMiLCJmb250U3R5bGVCdG5zIiwiY2hhbmdlVGVtcGxhdGVCdG4iLCJjaGFuZ2VUZW1wbGF0ZVNlY3QiLCJjbG9zZUNoYW5nZVRlbXBsYXRlU2VjdEJ0biIsInVzZVlvdXJQaG90byIsIm51bWJlck9mTWVtIiwiY2hhbmdlU2hvd0VsZW1lbnQiLCJjbGFzc0xpc3QiLCJzZWxlY3RlZFRlbXBsYXRlSW1nIiwidG9nZ2xlIiwic2hvd0NyZWF0ZU1lbSIsImVsIiwiZGF0YXNldCIsInNldEF0dHJpYnV0ZSIsImNvbmNhdCIsImltYWdlIiwiaW1hZ2VEYXRhVXJsIiwiY29udGFpbnMiLCJzZXRXaWR0aEFuZEhlaWdodE1lbSIsImlubmVySFRNTCIsIlVSTCIsImFwcGVuZENoaWxkIiwibG9hZEZpbGVCdG4iLCJmaWxlcyIsIkltYWdlIiwib25sb2FkIiwiaW1hZ2VIZWlnaHQiLCJhZGQiLCJ0YXJnZXQiLCJzcmMiLCJnZW5lcmV0ZU1lbSIsImdldENvbnRleHQiLCJ5T2Zmc2V0Iiwic3Ryb2tlU3R5bGUiLCJpbWFnZVdpZHRoIiwiY2FudmFzIiwiZnJhbWVUaGlja25lc3MiLCJmb250U2l6ZSIsIndpZHRoIiwieE9mVGV4dCIsInRleHRBbGlnbiIsInZhbHVlIiwibGluZVdpZHRoIiwiTWF0aCIsInRleHRhbGlnbiIsImxpbmVKb2luIiwiY3R4IiwiZm9udFN0eWxlIiwiZHJhd0ltYWdlIiwidGV4dFRvcCIsInRleHRCb3R0b20iLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZsb29yIiwiZm9udCIsImZvbnRGYW1pbGx5IiwidGV4dEJhc2VsaW5lIiwiaGVpZ2h0Iiwic3Ryb2tlVGV4dCIsImZpbGxUZXh0IiwiZG93bmxvYWRNZW0iLCJ0b2dnbGVTaG93Q2hhbmdlVGVtYXBsYXRlU2VjIiwiYWxsVGVtcGFsdGVzIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRvd25sb2FkIiwiZGlzcGxheSIsInRvRGF0YVVSTCIsImZvckVhY2giLCJ0eXBlVGVtcGxhdGUiXSwibWFwcGluZ3MiOiJhQUFBLElBa0NDQSxnQkFHS0MsTUFDTEMsV0FBQUEsWUF0Q0tDLGtCQUFvQkMsU0FBU0MsaUJBQ2xDLG1DQUFtQyxFQUU5Qkwsc0JBQXdCSSxTQUFTRSxjQUFjLG1CQUFvQixFQUNuRUMsZ0JBQWtCSCxTQUFTRSxjQUFjLFlBQWEsRUFDdERFLCtCQUdOSixTQUFNSyxjQUFtQkwsa0JBQVNFLEVBRTVCSSxpQkFBbUJELFNBQUFBLGNBQWlCSCxhQUFxQixFQUN6REssWUFBQUEsU0FBc0JGLGNBQWlCSCxXQUFBQSxFQUd2Q00saUJBQW1CUixpQkFBU0MsY0FBaUIsT0FBQSxFQUM3Q1Esb0JBQWlCVCxpQkFBdUJFLGNBQzlDLHNCQUFxQkYsRUFFZlUsaUJBQWdCVixTQUFTQyxpQkFBaUIsdUJBQW9CLEVBQzlEVSxlQUFnQlgsU0FBU0MsY0FBaUIsZUFBQSxFQUMxQ1csYUFBaUJaLFNBQUdBLGNBQVNFLHNCQUNsQyxFQUVLVyxPQUFBQSxTQUFrQlgsY0FBWUEsYUFBYyxFQUM1Q1ksY0FBQUEsU0FBMEJiLGlCQUMvQlksbUJBQWlDLEVBQzlCZixjQUFlRSxTQUFBQyxpQkFBQSxpQkFBQSxFQUNmYyxrQkFBb0JmLFNBQUFFLGNBQ3hCLDhCQUFTLEVBRUxjLG1CQUFlaEIsU0FBQUUsY0FBQSxrQkFBQSxFQUViZSwy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QyxTQUFTQyxpQkFBaUIsb0JBQW9CLEVBQUU4RSxRQUFRLFNBQUF6RCxHQUN2REEsRUFBR3FELGlCQUFpQixRQUFTLFdBQzVCbEMsWUFBWUksV0FBWVIsV0FBVyxDQUNwQyxDQUFDLENBQ0YsQ0FBQyxFQUNEMUIsY0FBY29FLFFBQVEsU0FBQXpELEdBQ3JCQSxFQUFHcUQsaUJBQWlCLFFBQVMsV0FDNUJoRSxjQUFjb0UsUUFBUSxTQUFBekQsR0FDckJBLEVBQUdKLFVBQVV3RCxPQUFPLGNBQWMsQ0FDbkMsQ0FBQyxFQUNEcEQsRUFBR0osVUFBVW9CLElBQUksY0FBYyxFQUMvQkcsWUFBWUksV0FBWVIsV0FBVyxDQUNwQyxDQUFDLENBQ0YsQ0FBQyxFQUNELENBQUN2QiwyQkFBNEJGLG1CQUFtQm1FLFFBQVEsU0FBQXpELEdBQ3ZEQSxFQUFHcUQsaUJBQWlCLFFBQVNILDRCQUE0QixDQUMxRCxDQUFDLEVBQ0QzRCxtQkFBbUJaLGlCQUFpQix3QkFBd0IsRUFBRThFLFFBQVEsU0FBQXpELEdBQ3JFQSxFQUFHcUQsaUJBQWlCLFFBQVMsV0FDNUI3RSxnQkFBa0J3QixFQUFHQyxRQUFReUQsYUFDN0JuRSxtQkFBbUJLLFVBQVVFLE9BQU8sTUFBTSxFQUMxQ3FCLFlBQVlJLFdBQVlSLFdBQVcsQ0FDcEMsQ0FBQyxDQUNGLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVNZW0ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYWxsVGVtYXBsYXRlSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG5cdFwiLnNlbGVjdC10ZW1hcGxhdGVfX2Nhcm91c2VsLWl0ZW0gXCJcclxuKTtcclxuY29uc3Qgc2VsZWN0VGVtcGxhdGVTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWxlY3QtdGVtYXBsYXRlXCIpO1xyXG5jb25zdCBzZXRJbWFnZVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldC1pbWFnZVwiKTtcclxuY29uc3QgYmFja1RvU2VsZWN0VGVtcGxhdGVTZWNpb250QnRuID1cclxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldC1pbWFnZV9fYmFja1wiKTtcclxuXHJcbmNvbnN0IGNyZWF0ZU1lbVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyZWF0ZS1tZW1cIik7XHJcbmNvbnN0IGxvYWRGaWxlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtZmlsZVwiKTtcclxuY29uc3QgY3JlYXRlTWVtQmFja0J0biA9IGNyZWF0ZU1lbVNlY3Rpb24ucXVlcnlTZWxlY3RvcihcIi5iYWNrXCIpO1xyXG5jb25zdCBjdXJyZW50bHlDcmVhdGVkTWVtID0gY3JlYXRlTWVtU2VjdGlvbi5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLmNyZWF0ZS1tZW1fX2ltZy1ib3hcIlxyXG4pO1xyXG5jb25zdCBhbGxTdGFuZGFyZEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zdGFuZGFyZC10aGVtZV9faXRlbVwiKTtcclxuY29uc3QgZG93bmxvYWRNZW1CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRvd25sb2FkLW1lbVwiKTtcclxuY29uc3QgY3JlYXRlTWVtQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcmVhdGUtbWVtX19tZW0tYm94XCIpO1xyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbnZhcy1tZW1cIik7XHJcbmNvbnN0IHRleHRBbGlnbkJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdGV4dC1hbGlnbl1cIik7XHJcbmNvbnN0IGZvbnRTdHlsZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvbnQtc3R5bGUtYnRuXCIpO1xyXG5jb25zdCBjaGFuZ2VUZW1wbGF0ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIuY3JlYXRlLW1lbV9fY2hhbmdlLXRlbXBsYXRlXCJcclxuKTtcclxuY29uc3QgY2hhbmdlVGVtcGxhdGVTZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGFuZ2UtdGVtcGxhdGVcIik7XHJcbmNvbnN0IGNsb3NlQ2hhbmdlVGVtcGxhdGVTZWN0QnRuID1cclxuXHRjaGFuZ2VUZW1wbGF0ZVNlY3QucXVlcnlTZWxlY3RvcihcIi5jbG9zZS1idG5cIik7XHJcbmxldCBzZWxlY3RlZEVsZW1lbnQ7XHJcbmxldCB1c2VZb3VyUGhvdG8gPSBmYWxzZTtcclxubGV0IGltYWdlO1xyXG5sZXQgaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQ7XHJcbmxldCBudW1iZXJPZk1lbSA9IDE7XHJcblxyXG5jb25zdCBjaGFuZ2VTaG93RWxlbWVudCA9ICgpID0+IHtcclxuXHRzZXRJbWFnZVNlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcblx0c2VsZWN0VGVtcGxhdGVTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpO1xyXG59O1xyXG5cclxuY29uc3QgY2hvb3NlQ3VycmVudFRlbWFwbHRlID0gZWwgPT4ge1xyXG5cdHNlbGVjdGVkRWxlbWVudCA9IGVsLnRhcmdldC5kYXRhc2V0LnR5cGVUZW1wbGF0ZTtcclxuXHRjb25zdCBzZWxlY3RlZFRlbXBsYXRlSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWxlY3RlZC10ZW1hcGxhdGUgaW1nXCIpO1xyXG5cdHNlbGVjdGVkVGVtcGxhdGVJbWcuc2V0QXR0cmlidXRlKFxyXG5cdFx0XCJzcmNcIixcclxuXHRcdGAuL2Rpc3QvYXNzZXRzL2ltYWdlcy9tZW1lLWRlbW8tdGVtcGxhdGUtJHtzZWxlY3RlZEVsZW1lbnR9LndlYnBgXHJcblx0KTtcclxuXHRjaGFuZ2VTaG93RWxlbWVudCgpO1xyXG59O1xyXG5cclxuY29uc3Qgc2hvd0NyZWF0ZU1lbSA9IGVsID0+IHtcclxuXHRpZiAoIWNyZWF0ZU1lbVNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvd1wiKSkge1xyXG5cdFx0c2V0V2lkdGhBbmRIZWlnaHRNZW0oZWwpO1xyXG5cdH1cclxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5jbGFzc0xpc3QudG9nZ2xlKFwibm8tc2Nyb2xsXCIpO1xyXG5cdGNyZWF0ZU1lbVNlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcblx0dXNlWW91clBob3RvID0gZmFsc2U7XHJcbn07XHJcbi8vdGhpcyBmdW5jdGlvbiBzZXRzICAgaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQgIHdoaWNoIHdpbGwgYmUgbmVlZGVkIGZvciB0aGUgY29ycmVjdCBkaXNwbGF5IG9mIG1lbWVzXHJcbmNvbnN0IHNldFdpZHRoQW5kSGVpZ2h0TWVtID0gZWwgPT4ge1xyXG5cdGlmICh1c2VZb3VyUGhvdG8pIHtcclxuXHRcdGNvbnN0IGltYWdlRGF0YVVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwobG9hZEZpbGVCdG4uZmlsZXNbMF0pO1xyXG5cdFx0aW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHRcdGltYWdlLnNyYyA9IGltYWdlRGF0YVVybDtcclxuXHRcdGN1cnJlbnRseUNyZWF0ZWRNZW0uaW5uZXJIVE1MID0gXCJcIjtcclxuXHRcdGltYWdlLmNsYXNzTGlzdC5hZGQoXCJjcmVhdGUtbWVtX19pbWdcIik7XHJcblx0XHRjdXJyZW50bHlDcmVhdGVkTWVtLmFwcGVuZENoaWxkKGltYWdlKTtcclxuXHRcdGltYWdlID0gY3VycmVudGx5Q3JlYXRlZE1lbS5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjb25zdCBpbWFnZURhdGFVcmwgPSBlbC50YXJnZXQucXVlcnlTZWxlY3RvcihcImltZ1wiKS5zcmM7XHJcblx0XHRpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5cdFx0aW1hZ2Uuc3JjID0gaW1hZ2VEYXRhVXJsO1xyXG5cdFx0Y3VycmVudGx5Q3JlYXRlZE1lbS5pbm5lckhUTUwgPSBcIlwiO1xyXG5cdFx0aW1hZ2UuY2xhc3NMaXN0LmFkZChcImNyZWF0ZS1tZW1fX2ltZ1wiKTtcclxuXHRcdGN1cnJlbnRseUNyZWF0ZWRNZW0uYXBwZW5kQ2hpbGQoaW1hZ2UpO1xyXG5cdH1cclxuXHRpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRpbWFnZVdpZHRoID0gaW1hZ2UuY2xpZW50V2lkdGg7XHJcblx0XHRpbWFnZUhlaWdodCA9IGltYWdlLmNsaWVudEhlaWdodDtcclxuXHRcdGN1cnJlbnRseUNyZWF0ZWRNZW0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuXHRcdGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cdFx0Z2VuZXJldGVNZW0oaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQpO1xyXG5cdH07XHJcbn07XHJcbmNvbnN0IGdlbmVyZXRlTWVtID0gKHdpZHRoLCBoZWlnaHQpID0+IHtcclxuXHRjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5cdGNvbnN0IHlPZmZzZXQgPSAzO1xyXG5cdGNvbnN0IHRleHRhbGlnbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS10ZXh0LWFsaWduXS5hY3RpdmUtdmFsdWVcIilcclxuXHRcdC5kYXRhc2V0LnRleHRBbGlnbjtcclxuXHJcblx0bGV0IGZvbnRTaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb250LXNpemVcIikudmFsdWU7XHJcblx0Y29uc3Qgc3Ryb2tlU3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LXN0cm9rZS1zdHlsZVwiKS52YWx1ZTtcclxuXHRjb25zdCBmaWxsU3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWNvbG9yLXRleHRcIikudmFsdWU7XHJcblx0Y29uc3QgZm9udFN0eWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb250LXN0eWxlLWJ0bi5hY3RpdmUtdmFsdWVcIilcclxuXHRcdC5kYXRhc2V0LmZvbnRTdHlsZTtcclxuXHRjb25zdCBmb250RmFtaWxseSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2VsZWN0LWZvbnRcIikudmFsdWU7XHJcblx0Y29uc3QgZnJhbWVUaGlja25lc3MgPSA4MDtcclxuXHRsZXQgeE9mVGV4dCxcclxuXHRcdHRleHRUb3AgPSBcIlwiLFxyXG5cdFx0dGV4dEJvdHRvbSA9IFwiXCI7XHJcblx0aWYgKGZvbnRTaXplID4gNjAgfHwgZm9udFNpemUgPT0gXCJcIikge1xyXG5cdFx0Zm9udFNpemUgPSA2MDtcclxuXHR9IGVsc2UgaWYgKGZvbnRTaXplIDwgMTApIHtcclxuXHRcdGZvbnRTaXplID0gMTA7XHJcblx0fVxyXG5cdGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG5cdGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcblx0Y3R4LmxpbmVXaWR0aCA9IE1hdGguZmxvb3IoZm9udFNpemUgLyA0KTtcclxuXHRjdHgudGV4dEFsaWduID0gdGV4dGFsaWduO1xyXG5cdGN0eC5saW5lSm9pbiA9IFwicm91bmRcIjtcclxuXHRjdHguZm9udCA9IGAke2ZvbnRTdHlsZX0gJHtmb250U2l6ZX1weCAke2ZvbnRGYW1pbGx5fWA7XHJcblx0Y3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3R5bGU7XHJcblx0Y3R4LmRyYXdJbWFnZShcclxuXHRcdGltYWdlLFxyXG5cdFx0MCxcclxuXHRcdDAsXHJcblx0XHRpbWFnZS5uYXR1cmFsV2lkdGgsXHJcblx0XHRpbWFnZS5oZWlnaHQsXHJcblx0XHQwLFxyXG5cdFx0MCxcclxuXHRcdHdpZHRoLFxyXG5cdFx0aGVpZ2h0XHJcblx0KTtcclxuXHRpZiAodGV4dGFsaWduID09IFwibGVmdFwiKSB7XHJcblx0XHR4T2ZUZXh0ID0gNTtcclxuXHR9IGVsc2UgaWYgKHRleHRhbGlnbiA9PSBcImNlbnRlclwiKSB7XHJcblx0XHR4T2ZUZXh0ID0gd2lkdGggLyAyO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR4T2ZUZXh0ID0gd2lkdGggLSA1O1xyXG5cdH1cclxuXHRzd2l0Y2ggKHNlbGVjdGVkRWxlbWVudCkge1xyXG5cdFx0Y2FzZSBcIjFcIjpcclxuXHRcdFx0Y3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuXHRcdFx0Y3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBmcmFtZVRoaWNrbmVzcyk7XHJcblx0XHRcdGN0eC5maWxsUmVjdCgwLCBoZWlnaHQgLSBmcmFtZVRoaWNrbmVzcywgd2lkdGgsIGZyYW1lVGhpY2tuZXNzKTtcclxuXHRcdFx0dGV4dFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9wLXRleHRcIikudmFsdWU7XHJcblx0XHRcdHRleHRCb3R0b20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JvdHRvbS10ZXh0XCIpLnZhbHVlO1xyXG5cdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJ0b3BcIjtcclxuXHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcclxuXHRcdFx0Y3R4LnN0cm9rZVRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcblx0XHRcdGN0eC5maWxsVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LnRleHRCYXNlbGluZSA9IFwiYm90dG9tXCI7XHJcblx0XHRcdGN0eC5zdHJva2VUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG5cdFx0XHRjdHguZmlsbFRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSBcIjJcIjpcclxuXHRcdFx0Y3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuXHRcdFx0Y3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBmcmFtZVRoaWNrbmVzcyk7XHJcblx0XHRcdHRleHRUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvcC10ZXh0XCIpLnZhbHVlO1xyXG5cdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJ0b3BcIjtcclxuXHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcclxuXHRcdFx0Y3R4LnN0cm9rZVRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcblx0XHRcdGN0eC5maWxsVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwiM1wiOlxyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xyXG5cdFx0XHRjdHguZmlsbFJlY3QoMCwgaGVpZ2h0IC0gZnJhbWVUaGlja25lc3MsIHdpZHRoLCBmcmFtZVRoaWNrbmVzcyk7XHJcblx0XHRcdHRleHRCb3R0b20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JvdHRvbS10ZXh0XCIpLnZhbHVlO1xyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xyXG5cdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJib3R0b21cIjtcclxuXHRcdFx0Y3R4LnN0cm9rZVRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcblx0XHRcdGN0eC5maWxsVGV4dCh0ZXh0Qm90dG9tLCB4T2ZUZXh0LCBoZWlnaHQgLSB5T2Zmc2V0KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwiNFwiOlxyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xyXG5cdFx0XHRjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGZyYW1lVGhpY2tuZXNzKTtcclxuXHRcdFx0Y3R4LmZpbGxSZWN0KDAsIGhlaWdodCAtIGZyYW1lVGhpY2tuZXNzLCB3aWR0aCwgZnJhbWVUaGlja25lc3MpO1xyXG5cdFx0XHR0ZXh0VG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b3AtdGV4dFwiKS52YWx1ZTtcclxuXHRcdFx0dGV4dEJvdHRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYm90dG9tLXRleHRcIikudmFsdWU7XHJcblx0XHRcdGN0eC50ZXh0QmFzZWxpbmUgPSBcInRvcFwiO1xyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xyXG5cdFx0XHRjdHguc3Ryb2tlVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LmZpbGxUZXh0KHRleHRUb3AsIHhPZlRleHQsIHlPZmZzZXQpO1xyXG5cdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJib3R0b21cIjtcclxuXHRcdFx0Y3R4LnN0cm9rZVRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcblx0XHRcdGN0eC5maWxsVGV4dCh0ZXh0Qm90dG9tLCB4T2ZUZXh0LCBoZWlnaHQgLSB5T2Zmc2V0KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwiNVwiOlxyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xyXG5cdFx0XHRjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGZyYW1lVGhpY2tuZXNzKTtcclxuXHRcdFx0dGV4dFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9wLXRleHRcIikudmFsdWU7XHJcblx0XHRcdGN0eC50ZXh0QmFzZWxpbmUgPSBcInRvcFwiO1xyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xyXG5cdFx0XHRjdHguc3Ryb2tlVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LmZpbGxUZXh0KHRleHRUb3AsIHhPZlRleHQsIHlPZmZzZXQpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgXCI2XCI6XHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcblx0XHRcdGN0eC5maWxsUmVjdCgwLCBoZWlnaHQgLSBmcmFtZVRoaWNrbmVzcywgd2lkdGgsIGZyYW1lVGhpY2tuZXNzKTtcclxuXHRcdFx0dGV4dEJvdHRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYm90dG9tLXRleHRcIikudmFsdWU7XHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XHJcblx0XHRcdGN0eC50ZXh0QmFzZWxpbmUgPSBcImJvdHRvbVwiO1xyXG5cdFx0XHRjdHguc3Ryb2tlVGV4dCh0ZXh0Qm90dG9tLCB4T2ZUZXh0LCBoZWlnaHQgLSB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LmZpbGxUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgXCI3XCI6XHJcblx0XHRcdHRleHRUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvcC10ZXh0XCIpLnZhbHVlO1xyXG5cdFx0XHR0ZXh0Qm90dG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib3R0b20tdGV4dFwiKS52YWx1ZTtcclxuXHRcdFx0Y3R4LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XHJcblx0XHRcdGN0eC5zdHJva2VUZXh0KHRleHRUb3AsIHhPZlRleHQsIHlPZmZzZXQpO1xyXG5cdFx0XHRjdHguZmlsbFRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcblx0XHRcdGN0eC50ZXh0QmFzZWxpbmUgPSBcImJvdHRvbVwiO1xyXG5cdFx0XHRjdHguc3Ryb2tlVGV4dCh0ZXh0Qm90dG9tLCB4T2ZUZXh0LCBoZWlnaHQgLSB5T2Zmc2V0KTtcclxuXHRcdFx0Y3R4LmZpbGxUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgXCI4XCI6XHJcblx0XHRcdHRleHRUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvcC10ZXh0XCIpLnZhbHVlO1xyXG5cdFx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJ0b3BcIjtcclxuXHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcclxuXHRcdFx0Y3R4LnN0cm9rZVRleHQodGV4dFRvcCwgeE9mVGV4dCwgeU9mZnNldCk7XHJcblx0XHRcdGN0eC5maWxsVGV4dCh0ZXh0VG9wLCB4T2ZUZXh0LCB5T2Zmc2V0KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwiOVwiOlxyXG5cdFx0XHR0ZXh0Qm90dG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib3R0b20tdGV4dFwiKS52YWx1ZTtcclxuXHRcdFx0Y3R4LnRleHRCYXNlbGluZSA9IFwiYm90dG9tXCI7XHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XHJcblx0XHRcdGN0eC5zdHJva2VUZXh0KHRleHRCb3R0b20sIHhPZlRleHQsIGhlaWdodCAtIHlPZmZzZXQpO1xyXG5cdFx0XHRjdHguZmlsbFRleHQodGV4dEJvdHRvbSwgeE9mVGV4dCwgaGVpZ2h0IC0geU9mZnNldCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGRvd25sb2FkTWVtID0gKCkgPT4ge1xyXG5cdGRvd25sb2FkTWVtQnRuLmRvd25sb2FkID0gYG1lbWUke251bWJlck9mTWVtfS5wbmdgO1xyXG5cdGRvd25sb2FkTWVtQnRuLmhyZWYgPSBjYW52YXMudG9EYXRhVVJMKCk7XHJcblx0bnVtYmVyT2ZNZW0rKztcclxufTtcclxuXHJcbmNvbnN0IHRvZ2dsZVNob3dDaGFuZ2VUZW1hcGxhdGVTZWMgPSAoKSA9PiB7XHJcblx0aWYgKCFjaGFuZ2VUZW1wbGF0ZVNlY3QuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvd1wiKSkge1xyXG5cdFx0Y29uc3QgYWxsVGVtcGFsdGVzID0gY2hhbmdlVGVtcGxhdGVTZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcblx0XHRcdFwiLmNoYW5nZS10ZW1wbGF0ZV9faXRlbVwiXHJcblx0XHQpO1xyXG5cdFx0YWxsVGVtcGFsdGVzLmZvckVhY2goZWwgPT4ge1xyXG5cdFx0XHRpZiAoZWwuZGF0YXNldC50eXBlVGVtcGxhdGUgPT0gc2VsZWN0ZWRFbGVtZW50KSB7XHJcblx0XHRcdFx0ZWwuY2xhc3NMaXN0LmFkZChcImN1cnJlbnQtdGVtcGxhdGVcIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZShcImN1cnJlbnQtdGVtcGxhdGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHRjaGFuZ2VUZW1wbGF0ZVNlY3QuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcbn07XHJcbmFsbFRlbWFwbGF0ZUl0ZW1zLmZvckVhY2goZWwgPT4ge1xyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaG9vc2VDdXJyZW50VGVtYXBsdGUpO1xyXG59KTtcclxuYmFja1RvU2VsZWN0VGVtcGxhdGVTZWNpb250QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VTaG93RWxlbWVudCk7XHJcblxyXG5sb2FkRmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcclxuXHR1c2VZb3VyUGhvdG8gPSB0cnVlO1xyXG5cdHNob3dDcmVhdGVNZW0odGhpcyk7XHJcbn0pO1xyXG5jcmVhdGVNZW1CYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0c2hvd0NyZWF0ZU1lbSgpO1xyXG5cdHVzZVlvdXJQaG90byA9IGZhbHNlO1xyXG5cdGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0Y3VycmVudGx5Q3JlYXRlZE1lbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG59KTtcclxuYWxsU3RhbmRhcmRJbWFnZS5mb3JFYWNoKGVsID0+IHtcclxuXHRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2hvd0NyZWF0ZU1lbSk7XHJcbn0pO1xyXG5cclxuZG93bmxvYWRNZW1CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRvd25sb2FkTWVtKTtcclxudGV4dEFsaWduQnRucy5mb3JFYWNoKGVsID0+IHtcclxuXHRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0dGV4dEFsaWduQnRucy5mb3JFYWNoKGVsID0+IHtcclxuXHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS12YWx1ZVwiKTtcclxuXHRcdH0pO1xyXG5cdFx0ZWwuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS12YWx1ZVwiKTtcclxuXHRcdGdlbmVyZXRlTWVtKGltYWdlV2lkdGgsIGltYWdlSGVpZ2h0KTtcclxuXHR9KTtcclxufSk7XHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY3JlYXRlLW1lbV9faW5wdXRcIikuZm9yRWFjaChlbCA9PiB7XHJcblx0ZWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdGdlbmVyZXRlTWVtKGltYWdlV2lkdGgsIGltYWdlSGVpZ2h0KTtcclxuXHR9KTtcclxufSk7XHJcbmZvbnRTdHlsZUJ0bnMuZm9yRWFjaChlbCA9PiB7XHJcblx0ZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdGZvbnRTdHlsZUJ0bnMuZm9yRWFjaChlbCA9PiB7XHJcblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtdmFsdWVcIik7XHJcblx0XHR9KTtcclxuXHRcdGVsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtdmFsdWVcIik7XHJcblx0XHRnZW5lcmV0ZU1lbShpbWFnZVdpZHRoLCBpbWFnZUhlaWdodCk7XHJcblx0fSk7XHJcbn0pO1xyXG5bY2xvc2VDaGFuZ2VUZW1wbGF0ZVNlY3RCdG4sIGNoYW5nZVRlbXBsYXRlQnRuXS5mb3JFYWNoKGVsID0+IHtcclxuXHRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlU2hvd0NoYW5nZVRlbWFwbGF0ZVNlYyk7XHJcbn0pO1xyXG5jaGFuZ2VUZW1wbGF0ZVNlY3QucXVlcnlTZWxlY3RvckFsbChcIi5jaGFuZ2UtdGVtcGxhdGVfX2l0ZW1cIikuZm9yRWFjaChlbCA9PiB7XHJcblx0ZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdHNlbGVjdGVkRWxlbWVudCA9IGVsLmRhdGFzZXQudHlwZVRlbXBsYXRlO1xyXG5cdFx0Y2hhbmdlVGVtcGxhdGVTZWN0LmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpO1xyXG5cdFx0Z2VuZXJldGVNZW0oaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQpO1xyXG5cdH0pO1xyXG59KTtcclxuIl19
